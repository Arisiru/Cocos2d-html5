<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>CocosJS Source: node/sprite/SpriteFrame.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.cerulean.css">

</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top ">
		<div class="navbar-inner">
			<a class="brand" href="index.html">CocosJS</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="global.html#cc">cc</a>
						</li>
						
						<li>
							<a href="global.html#cc#action">cc.action</a>
						</li>
						
						<li>
							<a href="cc.Debug.html">cc.Debug</a>
						</li>
						
						<li>
							<a href="cc.game.html">cc.game</a>
						</li>
						
						<li>
							<a href="cc.input.html">cc.input</a>
						</li>
						
						<li>
							<a href="cc.locale.html">cc.locale</a>
						</li>
						
						<li>
							<a href="cc.math.html">cc.math</a>
						</li>
						
						<li>
							<a href="cc.math.path_.html">cc.math.path</a>
						</li>
						
						<li>
							<a href="cc.node.html">cc.node</a>
						</li>
						
						<li>
							<a href="cc.node.sprite.html">cc.node.sprite</a>
						</li>
						
						<li>
							<a href="cc.plugin.html">cc.plugin</a>
						</li>
						
						<li>
							<a href="cc.plugin.asset.html">cc.plugin.asset</a>
						</li>
						
						<li>
							<a href="cc.plugin.audio.html">cc.plugin.audio</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.html">cc.plugin.layout</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.html">cc.plugin.loader</a>
						</li>
						
						<li>
							<a href="cc.plugin.texture.html">cc.plugin.texture</a>
						</li>
						
						<li>
							<a href="cc.render.html">cc.render</a>
						</li>
						
						<li>
							<a href="cc.render.shader.html">cc.render.shader</a>
						</li>
						
						<li>
							<a href="cc.render.WebGLState.html">cc.render.WebGLState</a>
						</li>
						
						<li>
							<a href="cc.transition.html">cc.transition</a>
						</li>
						
						<li>
							<a href="cc.util.html">cc.util</a>
						</li>
						
						<li>
							<a href="cc.widget.html">cc.widget</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="cc.action.Action.html">cc.action.Action</a>
						</li>
						
						<li>
							<a href="cc.action.ActionChainContext.html">cc.action.ActionChainContext</a>
						</li>
						
						<li>
							<a href="cc.action.ActionChainContext_constructor.html">cc.action.ActionChainContext#constructor</a>
						</li>
						
						<li>
							<a href="cc.action.ActionInfo.html">cc.action.ActionInfo</a>
						</li>
						
						<li>
							<a href="cc.action.ActionManager.html">cc.action.ActionManager</a>
						</li>
						
						<li>
							<a href="cc.action.AlphaAction.html">cc.action.AlphaAction</a>
						</li>
						
						<li>
							<a href="cc.action.AnimateAction.html">cc.action.AnimateAction</a>
						</li>
						
						<li>
							<a href="cc.action.Interpolator.html">cc.action.Interpolator</a>
						</li>
						
						<li>
							<a href="cc.action.JumpAction.html">cc.action.JumpAction</a>
						</li>
						
						<li>
							<a href="cc.action.MoveAction.html">cc.action.MoveAction</a>
						</li>
						
						<li>
							<a href="cc.action.ParseInterpolator.html">cc.action.ParseInterpolator</a>
						</li>
						
						<li>
							<a href="cc.action.PathAction.html">cc.action.PathAction</a>
						</li>
						
						<li>
							<a href="cc.action.PropertyAction.html">cc.action.PropertyAction</a>
						</li>
						
						<li>
							<a href="cc.action.PropertyInfo.html">cc.action.PropertyInfo</a>
						</li>
						
						<li>
							<a href="cc.action.RotateAction.html">cc.action.RotateAction</a>
						</li>
						
						<li>
							<a href="cc.action.ScaleAction.html">cc.action.ScaleAction</a>
						</li>
						
						<li>
							<a href="cc.action.SchedulerQueue.html">cc.action.SchedulerQueue</a>
						</li>
						
						<li>
							<a href="cc.action.SchedulerQueueTask.html">cc.action.SchedulerQueueTask</a>
						</li>
						
						<li>
							<a href="cc.action.SequenceAction.html">cc.action.SequenceAction</a>
						</li>
						
						<li>
							<a href="cc.action.TintAction.html">cc.action.TintAction</a>
						</li>
						
						<li>
							<a href="cc.game.Game.html">cc.game.Game</a>
						</li>
						
						<li>
							<a href="cc.input.InputManager.html">cc.input.InputManager</a>
						</li>
						
						<li>
							<a href="cc.input.InputManagerEvent.html">cc.input.InputManagerEvent</a>
						</li>
						
						<li>
							<a href="cc.input.KeyActionInfo.html">cc.input.KeyActionInfo</a>
						</li>
						
						<li>
							<a href="cc.input.KeyboardCursor.html">cc.input.KeyboardCursor</a>
						</li>
						
						<li>
							<a href="cc.input.KeyboardInputManager.html">cc.input.KeyboardInputManager</a>
						</li>
						
						<li>
							<a href="cc.input.KeyInfo.html">cc.input.KeyInfo</a>
						</li>
						
						<li>
							<a href="cc.input.MouseInputManager.html">cc.input.MouseInputManager</a>
						</li>
						
						<li>
							<a href="cc.input.MouseInputManagerEvent.html">cc.input.MouseInputManagerEvent</a>
						</li>
						
						<li>
							<a href="cc.input.PriorityInputNode.html">cc.input.PriorityInputNode</a>
						</li>
						
						<li>
							<a href="cc.input.SceneGraphInputTreeNode.html">cc.input.SceneGraphInputTreeNode</a>
						</li>
						
						<li>
							<a href="cc.math.Color.html">cc.math.Color</a>
						</li>
						
						<li>
							<a href="cc.math.Dimension.html">cc.math.Dimension</a>
						</li>
						
						<li>
							<a href="cc.math.Matrix3.html">cc.math.Matrix3</a>
						</li>
						
						<li>
							<a href="cc.math.Path.html">cc.math.Path</a>
						</li>
						
						<li>
							<a href="cc.math.path.ContainerSegment.html">cc.math.path.ContainerSegment</a>
						</li>
						
						<li>
							<a href="cc.math.path.SegmentArc.html">cc.math.path.SegmentArc</a>
						</li>
						
						<li>
							<a href="cc.math.path.SegmentBezier.html">cc.math.path.SegmentBezier</a>
						</li>
						
						<li>
							<a href="cc.math.path.SegmentCardinalSpline.html">cc.math.path.SegmentCardinalSpline</a>
						</li>
						
						<li>
							<a href="cc.math.path_.html#SegmentLine">cc.math.path.SegmentLine</a>
						</li>
						
						<li>
							<a href="cc.math.path.SegmentQuadratic.html">cc.math.path.SegmentQuadratic</a>
						</li>
						
						<li>
							<a href="cc.math.path.SubPath.html">cc.math.path.SubPath</a>
						</li>
						
						<li>
							<a href="cc.math.Rectangle.html">cc.math.Rectangle</a>
						</li>
						
						<li>
							<a href="cc.math.Vector.html">cc.math.Vector</a>
						</li>
						
						<li>
							<a href="cc.node.Director.html">cc.node.Director</a>
						</li>
						
						<li>
							<a href="cc.node.FastSprite.html">cc.node.FastSprite</a>
						</li>
						
						<li>
							<a href="cc.node.Node.html">cc.node.Node</a>
						</li>
						
						<li>
							<a href="cc.node.Scene.html">cc.node.Scene</a>
						</li>
						
						<li>
							<a href="cc.node.Sprite_.html">cc.node.Sprite</a>
						</li>
						
						<li>
							<a href="cc.node.sprite.Animation.html">cc.node.sprite.Animation</a>
						</li>
						
						<li>
							<a href="cc.node.sprite.AnimationCache.html">cc.node.sprite.AnimationCache</a>
						</li>
						
						<li>
							<a href="cc.node.sprite.SpriteFrame.html">cc.node.sprite.SpriteFrame</a>
						</li>
						
						<li>
							<a href="cc.plugin.asset.AssetManager.html">cc.plugin.asset.AssetManager</a>
						</li>
						
						<li>
							<a href="cc.plugin.audio.AudioEffect.html">cc.plugin.audio.AudioEffect</a>
						</li>
						
						<li>
							<a href="cc.plugin.audio.AudioManager.html">cc.plugin.audio.AudioManager</a>
						</li>
						
						<li>
							<a href="cc.plugin.font.FontMetrics.html">cc.plugin.font.FontMetrics</a>
						</li>
						
						<li>
							<a href="cc.plugin.font.SpriteFont.html">cc.plugin.font.SpriteFont</a>
						</li>
						
						<li>
							<a href="cc.plugin.font.SpriteFontChar.html">cc.plugin.font.SpriteFontChar</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.BorderLayout.html">cc.plugin.layout.BorderLayout</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.Gap.html">cc.plugin.layout.Gap</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.GridLayout.html">cc.plugin.layout.GridLayout</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.Insets.html">cc.plugin.layout.Insets</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.LayerLayout.html">cc.plugin.layout.LayerLayout</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.Layout.html">cc.plugin.layout.Layout</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.Unit.html">cc.plugin.layout.Unit</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.Loader.html">cc.plugin.loader.Loader</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.ResourceLoaderAudioBuffer.html">cc.plugin.loader.ResourceLoaderAudioBuffer</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.ResourceLoaderImage.html">cc.plugin.loader.ResourceLoaderImage</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.ResourceLoaderJSON.html">cc.plugin.loader.ResourceLoaderJSON</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.ResourceLoaderXML.html">cc.plugin.loader.ResourceLoaderXML</a>
						</li>
						
						<li>
							<a href="cc.plugin.texture.TexturePacker.html">cc.plugin.texture.TexturePacker</a>
						</li>
						
						<li>
							<a href="cc.plugin.texture.TexturePackerNode.html">cc.plugin.texture.TexturePackerNode</a>
						</li>
						
						<li>
							<a href="cc.plugin.texture.TexturePackerPage.html">cc.plugin.texture.TexturePackerPage</a>
						</li>
						
						<li>
							<a href="cc.render.CanvasRenderer.html">cc.render.CanvasRenderer</a>
						</li>
						
						<li>
							<a href="cc.render.DecoratedWebGLRenderingContext.html">cc.render.DecoratedWebGLRenderingContext</a>
						</li>
						
						<li>
							<a href="cc.render.GeometryBatcher.html">cc.render.GeometryBatcher</a>
						</li>
						
						<li>
							<a href="cc.render.Pattern.html">cc.render.Pattern</a>
						</li>
						
						<li>
							<a href="cc.render.Renderer.html">cc.render.Renderer</a>
						</li>
						
						<li>
							<a href="cc.render.RenderingContextSnapshot.html">cc.render.RenderingContextSnapshot</a>
						</li>
						
						<li>
							<a href="cc.render.ScaleManager.html">cc.render.ScaleManager</a>
						</li>
						
						<li>
							<a href="cc.render.shader.AbstractShader.html">cc.render.shader.AbstractShader</a>
						</li>
						
						<li>
							<a href="cc.render.shader.Attribute.html">cc.render.shader.Attribute</a>
						</li>
						
						<li>
							<a href="cc.render.shader.MatrixUniform.html">cc.render.shader.MatrixUniform</a>
						</li>
						
						<li>
							<a href="cc.render.shader.SolidColorShader.html">cc.render.shader.SolidColorShader</a>
						</li>
						
						<li>
							<a href="cc.render.shader.TextureShader.html">cc.render.shader.TextureShader</a>
						</li>
						
						<li>
							<a href="cc.render.shader.TextureUniform.html">cc.render.shader.TextureUniform</a>
						</li>
						
						<li>
							<a href="cc.render.shader.Uniform.html">cc.render.shader.Uniform</a>
						</li>
						
						<li>
							<a href="cc.render.Texture2D.html">cc.render.Texture2D</a>
						</li>
						
						<li>
							<a href="cc.render.WebGLRenderer.html">cc.render.WebGLRenderer</a>
						</li>
						
						<li>
							<a href="cc.transition.Transition.html">cc.transition.Transition</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionFade.html">cc.transition.TransitionFade</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionMove.html">cc.transition.TransitionMove</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionSlideInB.html">cc.transition.TransitionSlideInB</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionSlideInL.html">cc.transition.TransitionSlideInL</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionSlideInR.html">cc.transition.TransitionSlideInR</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionSlideInT.html">cc.transition.TransitionSlideInT</a>
						</li>
						
						<li>
							<a href="cc.util.Resource.html">cc.util.Resource</a>
						</li>
						
						<li>
							<a href="cc.widget.Button.html">cc.widget.Button</a>
						</li>
						
						<li>
							<a href="cc.widget.Label.html">cc.widget.Label</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="global.html#__extends">__extends</a>
						</li>
						
						<li>
							<a href="global.html#test">test</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
			<div class="span12">
				
				<div id="main">
					


		<h1 class="page-title">Source: node/sprite/SpriteFrame.js</h1>
    
<section>
	<article>
		<pre
			class="sunlight-highlight-javascript linenums">/**
 * Created by ibon on 11/26/14.
 */
/// &lt;reference path="../../math/Point.ts"/>
/// &lt;reference path="../../math/Rectangle.ts"/>
/// &lt;reference path="../Sprite.ts"/>
/// &lt;reference path="../../render/RenderingContext.ts"/>
/// &lt;reference path="../../render/DecoratedWebGLRenderingContext.ts"/>
/// &lt;reference path="../../render/Texture2D.ts"/>
/// &lt;reference path="../../locale/Locale.ts"/>
/// &lt;reference path="../../util/Debug.ts"/>
/// &lt;reference path="../../plugin/asset/AssetManager.ts"/>
var cc;
(function (cc) {
    var node;
    (function (node) {
        var sprite;
        (function (sprite) {
            var Vector = cc.math.Vector;
            var Rectangle = cc.math.Rectangle;
            function __createSpriteFrame(from, x, y, w, h, name, rotated, offsetx, offsety) {
                var frame = from.createSubSpriteFrame(parseFloat(x), parseFloat(y), parseFloat(w), parseFloat(h), name, offsetx, offsety);
                frame.rotated = rotated;
                return frame;
            }
            /**
             * @class cc.node.sprite.SpriteFrame
             * @classdesc
             *
             * This Object defines a pixels source (image, canvas, texture, etc.) and an associated Rect for image blitting
             * operations.
             * It has parent-child capabilities. A SpriteFrame can create subFrames. SubFrames will have a parent reference,
             * share the same Texture instance and will apply the appropriate offset.
             *
             */
            var SpriteFrame = (function () {
                /**
                 * Create a new SpriteFrame instance.
                 * @method cc.node.sprite.SpriteFrame#constructor
                 * @param _texture {Texture2D} an string or Texture2D
                 * @param rect {cc.math.Rectangle=} an optional rect on the texture. If not set, the whole image will be used.
                 */
                function SpriteFrame(_texture, rect) {
                    this._texture = _texture;
                    /**
                     * Parent's SpriteFrame. When creating Frames from an image, a call to &lt;code>spriteFrame.createFrame&lt;/code>
                     * will create a child of a frame, set its parent, and inherit the offseting based on parent's chain.
                     * Both frames will share the same Texture2D instance.
                     * @type {cc.node.SpriteFrame}
                     * @member cc.node.sprite.SpriteFrame#_parent
                     * @private
                     */
                    this._parent = null;
                    /**
                     * Offset position in texture.
                     * When setting parents, the offset will be the parent's position.
                     * @member cc.node.sprite.SpriteFrame#_offset
                     * @type {cc.math.Vector}
                     * @private
                     */
                    this._offset = new Vector();
                    /**
                     * Displacement to add to position the spriteframe on screen.
                     * Nothing to do with uv coords.
                     * @member cc.node.sprite.SpriteFrame#_offsetFromCenter
                     * @type {cc.math.Vector}
                     * @private
                     */
                    this._offsetFromCenter = null;
                    /**
                     * Is the frame rotated ?. Not by default.
                     * @member cc.node.sprite.SpriteFrame#_rotated
                     * @type {boolean}
                     * @private
                     */
                    this._rotated = false;
                    /**
                     * Recatangle in pixels the SpriteFrame represents.
                     * @member cc.node.sprite.SpriteFrame#_rect
                     * @type {cc.math.Rectangle}
                     * @private
                     */
                    this._rect = null;
                    /**
                     * Recatangle in uv the SpriteFrame represents.
                     * @member cc.node.sprite.SpriteFrame#_normalizedRect
                     * @type {cc.math.Rectangle}
                     * @private
                     */
                    this._normalizedRect = new Rectangle();
                    /**
                     * Texture data. Texture is a source of pixels, either Image, Canvas or a GLTexture
                     * @member cc.node.sprite.SpriteFrame#_texture
                     * @type {cc.render.Texture2D}
                     * @private
                     */
                    /**
                     *
                     * @type {null}
                     * @private
                     */
                    this._name = null;
                    this._rect = rect ? rect : (_texture !== null ? new Rectangle(0, 0, _texture._imageWidth, _texture._imageHeight) : new Rectangle());
                    this.__calculateNormalizedRect();
                    this._name = _texture &amp;&amp; _texture._name ? _texture._name : "root";
                }
                SpriteFrame.prototype.getWidth = function () {
                    return this._rect.w;
                };
                SpriteFrame.prototype.getHeight = function () {
                    return this._rect.h;
                };
                SpriteFrame.prototype.getX = function () {
                    return this._rect.x;
                };
                SpriteFrame.prototype.getY = function () {
                    return this._rect.y;
                };
                Object.defineProperty(SpriteFrame.prototype, "x", {
                    get: function () {
                        return this._rect.x;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(SpriteFrame.prototype, "y", {
                    get: function () {
                        return this._rect.y;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(SpriteFrame.prototype, "width", {
                    get: function () {
                        return this._rect.w;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(SpriteFrame.prototype, "height", {
                    get: function () {
                        return this._rect.h;
                    },
                    enumerable: true,
                    configurable: true
                });
                /**
                 * Create a new SpriteFrame from this one. The rect will be relative to this SpriteFrame's rect and offset.
                 * The rect supplied is clipped against this SpriteFrame's rect. If the resulting rect is Empty (has no dimension)
                 * null will be returned.
                 * The caller is responsible from storing the resulting SpriteFrame object.
                 * @method cc.node.sprite.SpriteFrame#createSubSpriteFrame
                 * @param x {number}
                 * @param y {number}
                 * @param w {number}
                 * @param h {number}
                 * @param name {string} a frame's name. If not set, "frameXXX" where XXX is a sequence value will be set.
                 * @returns {SpriteFrame} a new SubSpriteFrame created from this one or null if the supplied rect does not
                 *  intersect this SpriteFrame's rect.
                 */
                SpriteFrame.prototype.createSubSpriteFrame = function (x, y, w, h, name, centerOffsetX, centerOffsetY) {
                    var newRect = new Rectangle(x, y, w, h);
                    newRect.translate(this._rect.x, this._rect.y);
                    if (this._rect.intersectsWith(newRect)) {
                        var sf = new SpriteFrame(this._texture, newRect);
                        sf._name = name;
                        sf._parent = this;
                        sf.setOffset(this._offset.x + this._rect.x, this._offset.y + this._rect.y);
                        sf.setOffsetFromCenter(centerOffsetX || 0, centerOffsetY || 0);
                        return sf;
                    }
                    return null;
                };
                SpriteFrame.prototype.needsSpecialMatrix = function () {
                    return this._offsetFromCenter !== null || this._rotated;
                };
                SpriteFrame.prototype.setOffsetFromCenter = function (x, y) {
                    if (this._offsetFromCenter === null) {
                        this._offsetFromCenter = new Vector(0, 0);
                    }
                    this._offsetFromCenter.set(x, y);
                };
                SpriteFrame.prototype.createSubSpriteFrames = function (rows, columns) {
                    var sfwidth = this._rect.w / columns;
                    var sfheight = this._rect.h / rows;
                    var frames = [];
                    for (var i = 0; i &lt; rows; i++) {
                        for (var j = 0; j &lt; columns; j++) {
                            frames.push(this.createSubSpriteFrame(j * sfwidth, i * sfheight, sfwidth, sfheight, this._name + (j + i * columns)));
                        }
                    }
                    return frames;
                };
                /**
                 * Set the SpriteFrame offset. This is useful to properly position a Frame inside a frame. For example, a texture
                 * atlas with a font, which effectively another atlas.
                 * If the offset position is not contained the SpriteFrame's rect, the offset operation does nothing.
                 * @method cc.node.sprite.SpriteFrame#setOffset
                 * @param x {number}
                 * @param y {number}
                 */
                SpriteFrame.prototype.setOffset = function (x, y) {
                    if (!this._texture) {
                        cc.Debug.error(cc.locale.ERR_SPRITE_FRAME_NO_TEXTURE, "setOffset");
                    }
                    //if ( this._rect.contains( x,y ) ) {
                    this._offset.set(x, y);
                    this.__calculateNormalizedRect();
                    //}
                };
                Object.defineProperty(SpriteFrame.prototype, "rotated", {
                    /**
                     * Is this SpriteFrame rotated ?
                     * @method cc.node.sprite.SpriteFrame#get:rotated
                     * @returns {boolean}
                     */
                    get: function () {
                        return this._rotated;
                    },
                    /**
                     * Set this SpriteFrame to have the image rotated.
                     * @method cc.node.sprite.SpriteFrame#set:rotated
                     * @param v {boolean}
                     */
                    set: function (v) {
                        this._rotated = v;
                    },
                    enumerable: true,
                    configurable: true
                });
                /**
                 * Calculate WebGL rect based on the current frame info.
                 * @member cc.node.sprite.SpriteFrame#__calculateNormalizedRect
                 * @private
                 */
                SpriteFrame.prototype.__calculateNormalizedRect = function () {
                    if (cc.render.RENDER_ORIGIN === "bottom") {
                        this._normalizedRect.set(this._rect.x, this._texture._imageHeight - this._rect.y - this._rect.h, this._rect.w, this._rect.h).normalizeBy(this._texture._textureWidth, this._texture._textureHeight);
                    }
                    else {
                        this._normalizedRect.set(this._rect.x, this._rect.y, this._rect.w, this._rect.h).normalizeBy(this._texture._textureWidth, this._texture._textureHeight);
                    }
                };
                /**
                 * Get this SpriteFrame associated texture 2d object.
                 * @method cc.node.sprite.SpriteFrame#getTexture
                 * @returns {cc.render.Texture2D}
                 */
                SpriteFrame.prototype.getTexture = function () {
                    return this._texture;
                };
                /**
                 * Draw the SpriteFrame.
                 * This method takes care of drawing the Frame with the correct rotation and Sprite's status of flip axis values.
                 * @method cc.node.sprite.SpriteFrame#draw
                 * @param ctx {cc.render.RenderingContext}
                 * @param sprite {cc.node.Sprite}
                 */
                SpriteFrame.prototype.draw = function (ctx, w, h) {
                    if (ctx.type === "webgl") {
                        if (!this._texture.isWebGLEnabled()) {
                            cc.Debug.warn(cc.locale.SPRITEFRAME_WARN_TEXTURE_NOT_WEBGL_INITIALIZED, "SpriteFrame.draw");
                            this._texture.__setAsGLTexture(ctx._webglState);
                            this.__calculateNormalizedRect();
                        }
                    }
                    ctx.drawTexture(this._texture, this._rect.x, this._rect.y, this._rect.w, this._rect.h, 0, 0, w, h);
                };
                /**
                 * Create a set of new SpriteFrames from this SpriteFrame area, and defined by a JSON object.
                 * The JSON object is typically the result of a ResourceLoaderJSON with parse flag enabled.
                 * The JSON structure is the result from the tool TexturePacker, exporting content as JSON.
                 * The function will create an array of newly created SpriteFrames. It is not this function's responsibility
                 * to add the new frames to a cache or anything but creating them.
                 *
                 * @param map {object} a TexturePacker JSON exported file.
                 * @param frames {Array&lt;cc.node.sprite.SpriteFrame>=} array of newly created SpriteFrames. if this parameter is
                 *      not set, a new array will be created and returned.
                 * @returns {SpriteFrame[]}
                 */
                SpriteFrame.prototype.createSpriteFramesFromJSON = function (map, frames) {
                    frames = frames || [];
                    map = map.frames || map;
                    for (var element in map) {
                        if (map.hasOwnProperty(element)) {
                            var frameRect = map[element].frame;
                            frames.push(__createSpriteFrame(this, frameRect.x, frameRect.y, frameRect.w, frameRect.h, element, map[element].rotated, 0, 0));
                        }
                    }
                    return frames;
                };
                /**
                 * Create a set of new SpriteFrames from this SpriteFrame area, and defined by a 'plist' object.
                 * The plist object is typically the result of a ResourceLoaderXML.
                 * The plist structure is the result from the tool TexturePacker, exporting content as Cocos2d.
                 * The function will create an array of newly created SpriteFrames. It is not this function's responsibility
                 * to add the new frames to a cache or anything but creating them.
                 *
                 * @param obj {object} plist loaded file content in the form of a javascript array.
                 * @returns {SpriteFrame[]}
                 */
                SpriteFrame.prototype.createSpriteFramesFromPLIST = function (obj) {
                    var ret = [];
                    var frames = obj[0].frames;
                    for (var id in frames) {
                        if (frames.hasOwnProperty(id)) {
                            var frameInfo = frames[id];
                            if (frameInfo.frame) {
                                // frame info is of the form {{x,y},{w,h}}
                                var fi = frameInfo.frame.substring(1, frameInfo.frame.length - 1);
                                var fis = fi.substring(1, fi.length - 1).split('},{');
                                var xy = fis[0].split(',');
                                var wh = fis[1].split(',');
                                // frame info offset {0,0}
                                var foffset = frameInfo.offset.substring(1, fi.length - 1).split('},{');
                                var offsetxy = foffset[0].split(',');
                                // WFT!!!
                                // the file format specifies if rotated, the frame size in inverted.
                                var w, h;
                                w = parseFloat(frameInfo.rotated ? wh[1] : wh[0]);
                                h = parseFloat(frameInfo.rotated ? wh[0] : wh[1]);
                                var ox, oy;
                                //ox= parseFloat(frameInfo.rotated ? offsetxy[1] : offsetxy[0]);
                                //oy= parseFloat(frameInfo.rotated ? offsetxy[0] : offsetxy[1]);
                                ox = parseFloat(offsetxy[0]);
                                oy = parseFloat(offsetxy[1]);
                                ret.push(__createSpriteFrame(this, parseFloat(xy[0]), parseFloat(xy[1]), w, h, id, frameInfo.rotated, ox, oy));
                            }
                            else {
                                ret.push(__createSpriteFrame(this, frameInfo.x, frameInfo.y, frameInfo.width, frameInfo.height, id, frameInfo.rotated, 0, 0));
                            }
                        }
                    }
                    return ret;
                };
                return SpriteFrame;
            })();
            sprite.SpriteFrame = SpriteFrame;
        })(sprite = node.sprite || (node.sprite = {}));
    })(node = cc.node || (cc.node = {}));
})(cc || (cc = {}));
</pre>
	</article>
</section>





				</div>

				<div class="clearfix"></div>
				<footer>
					
					@hyperandroid
					<br />
					
					
		<span class="copyright">
		Chukong inc. 2014
		</span>
					<br />
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a>
		on 23/Tu/2015 using the <a
			href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<br clear="both">
		</div>

	</div>
	<!--<script src="scripts/sunlight.js"></script>-->
	<script src="scripts/docstrap.lib.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>

	<script>
		$( function () {
			$( "[id*='$']" ).each( function () {
				var $this = $( this );

				$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
			} );

			$( "#toc" ).toc( {
				anchorName  : function ( i, heading, prefix ) {
					return $( heading ).attr( "id" ) || ( prefix + i );
				},
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : "100px"
			} );

			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );
			$( '.dropdown-toggle' ).dropdown();
//			$( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

			$( ".tutorial-section pre, .readme-section pre" ).each( function () {
				var $this = $( this );

				var example = $this.find( "code" );
				exampleText = example.html();
				var lang = /{@lang (.*?)}/.exec( exampleText );
				if ( lang && lang[1] ) {
					exampleText = exampleText.replace( lang[0], "" );
					example.html( exampleText );
					lang = lang[1];
				} else {
					lang = "javascript";
				}

				if ( lang ) {

					$this
						.addClass( "sunlight-highlight-" + lang )
						.addClass( "linenums" )
						.html( example.html() );

				}
			} );

			Sunlight.highlightAll( {
				lineNumbers : true,
				showMenu : true,
				enableDoclinks : true
			} );
		} );
	 </script>



	<!--Navigation and Symbol Display-->
	


	<!--Google Analytics-->
	

</body>
</html>
