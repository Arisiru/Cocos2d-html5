<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>CocosJS Source: input/InputManager.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.cerulean.css">

</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top ">
		<div class="navbar-inner">
			<a class="brand" href="index.html">CocosJS</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="global.html#cc">cc</a>
						</li>
						
						<li>
							<a href="global.html#cc#action">cc.action</a>
						</li>
						
						<li>
							<a href="cc.Debug.html">cc.Debug</a>
						</li>
						
						<li>
							<a href="cc.game.html">cc.game</a>
						</li>
						
						<li>
							<a href="cc.input.html">cc.input</a>
						</li>
						
						<li>
							<a href="cc.locale.html">cc.locale</a>
						</li>
						
						<li>
							<a href="cc.math.html">cc.math</a>
						</li>
						
						<li>
							<a href="cc.math.path_.html">cc.math.path</a>
						</li>
						
						<li>
							<a href="cc.node.html">cc.node</a>
						</li>
						
						<li>
							<a href="cc.node.sprite.html">cc.node.sprite</a>
						</li>
						
						<li>
							<a href="cc.plugin.html">cc.plugin</a>
						</li>
						
						<li>
							<a href="cc.plugin.asset.html">cc.plugin.asset</a>
						</li>
						
						<li>
							<a href="cc.plugin.audio.html">cc.plugin.audio</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.html">cc.plugin.layout</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.html">cc.plugin.loader</a>
						</li>
						
						<li>
							<a href="cc.plugin.texture.html">cc.plugin.texture</a>
						</li>
						
						<li>
							<a href="cc.render.html">cc.render</a>
						</li>
						
						<li>
							<a href="cc.render.shader.html">cc.render.shader</a>
						</li>
						
						<li>
							<a href="cc.render.WebGLState.html">cc.render.WebGLState</a>
						</li>
						
						<li>
							<a href="cc.transition.html">cc.transition</a>
						</li>
						
						<li>
							<a href="cc.util.html">cc.util</a>
						</li>
						
						<li>
							<a href="cc.widget.html">cc.widget</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="cc.action.Action.html">cc.action.Action</a>
						</li>
						
						<li>
							<a href="cc.action.ActionChainContext.html">cc.action.ActionChainContext</a>
						</li>
						
						<li>
							<a href="cc.action.ActionChainContext_constructor.html">cc.action.ActionChainContext#constructor</a>
						</li>
						
						<li>
							<a href="cc.action.ActionInfo.html">cc.action.ActionInfo</a>
						</li>
						
						<li>
							<a href="cc.action.ActionManager.html">cc.action.ActionManager</a>
						</li>
						
						<li>
							<a href="cc.action.AlphaAction.html">cc.action.AlphaAction</a>
						</li>
						
						<li>
							<a href="cc.action.AnimateAction.html">cc.action.AnimateAction</a>
						</li>
						
						<li>
							<a href="cc.action.Interpolator.html">cc.action.Interpolator</a>
						</li>
						
						<li>
							<a href="cc.action.JumpAction.html">cc.action.JumpAction</a>
						</li>
						
						<li>
							<a href="cc.action.MoveAction.html">cc.action.MoveAction</a>
						</li>
						
						<li>
							<a href="cc.action.ParseInterpolator.html">cc.action.ParseInterpolator</a>
						</li>
						
						<li>
							<a href="cc.action.PathAction.html">cc.action.PathAction</a>
						</li>
						
						<li>
							<a href="cc.action.PropertyAction.html">cc.action.PropertyAction</a>
						</li>
						
						<li>
							<a href="cc.action.PropertyInfo.html">cc.action.PropertyInfo</a>
						</li>
						
						<li>
							<a href="cc.action.RotateAction.html">cc.action.RotateAction</a>
						</li>
						
						<li>
							<a href="cc.action.ScaleAction.html">cc.action.ScaleAction</a>
						</li>
						
						<li>
							<a href="cc.action.SchedulerQueue.html">cc.action.SchedulerQueue</a>
						</li>
						
						<li>
							<a href="cc.action.SchedulerQueueTask.html">cc.action.SchedulerQueueTask</a>
						</li>
						
						<li>
							<a href="cc.action.SequenceAction.html">cc.action.SequenceAction</a>
						</li>
						
						<li>
							<a href="cc.action.TintAction.html">cc.action.TintAction</a>
						</li>
						
						<li>
							<a href="cc.game.Game.html">cc.game.Game</a>
						</li>
						
						<li>
							<a href="cc.input.InputManager.html">cc.input.InputManager</a>
						</li>
						
						<li>
							<a href="cc.input.InputManagerEvent.html">cc.input.InputManagerEvent</a>
						</li>
						
						<li>
							<a href="cc.input.KeyActionInfo.html">cc.input.KeyActionInfo</a>
						</li>
						
						<li>
							<a href="cc.input.KeyboardCursor.html">cc.input.KeyboardCursor</a>
						</li>
						
						<li>
							<a href="cc.input.KeyboardInputManager.html">cc.input.KeyboardInputManager</a>
						</li>
						
						<li>
							<a href="cc.input.KeyInfo.html">cc.input.KeyInfo</a>
						</li>
						
						<li>
							<a href="cc.input.MouseInputManager.html">cc.input.MouseInputManager</a>
						</li>
						
						<li>
							<a href="cc.input.MouseInputManagerEvent.html">cc.input.MouseInputManagerEvent</a>
						</li>
						
						<li>
							<a href="cc.input.PriorityInputNode.html">cc.input.PriorityInputNode</a>
						</li>
						
						<li>
							<a href="cc.input.SceneGraphInputTreeNode.html">cc.input.SceneGraphInputTreeNode</a>
						</li>
						
						<li>
							<a href="cc.math.Color.html">cc.math.Color</a>
						</li>
						
						<li>
							<a href="cc.math.Dimension.html">cc.math.Dimension</a>
						</li>
						
						<li>
							<a href="cc.math.Matrix3.html">cc.math.Matrix3</a>
						</li>
						
						<li>
							<a href="cc.math.Path.html">cc.math.Path</a>
						</li>
						
						<li>
							<a href="cc.math.path.ContainerSegment.html">cc.math.path.ContainerSegment</a>
						</li>
						
						<li>
							<a href="cc.math.path.SegmentArc.html">cc.math.path.SegmentArc</a>
						</li>
						
						<li>
							<a href="cc.math.path.SegmentBezier.html">cc.math.path.SegmentBezier</a>
						</li>
						
						<li>
							<a href="cc.math.path.SegmentCardinalSpline.html">cc.math.path.SegmentCardinalSpline</a>
						</li>
						
						<li>
							<a href="cc.math.path_.html#SegmentLine">cc.math.path.SegmentLine</a>
						</li>
						
						<li>
							<a href="cc.math.path.SegmentQuadratic.html">cc.math.path.SegmentQuadratic</a>
						</li>
						
						<li>
							<a href="cc.math.path.SubPath.html">cc.math.path.SubPath</a>
						</li>
						
						<li>
							<a href="cc.math.Rectangle.html">cc.math.Rectangle</a>
						</li>
						
						<li>
							<a href="cc.math.Vector.html">cc.math.Vector</a>
						</li>
						
						<li>
							<a href="cc.node.Director.html">cc.node.Director</a>
						</li>
						
						<li>
							<a href="cc.node.FastSprite.html">cc.node.FastSprite</a>
						</li>
						
						<li>
							<a href="cc.node.Node.html">cc.node.Node</a>
						</li>
						
						<li>
							<a href="cc.node.Scene.html">cc.node.Scene</a>
						</li>
						
						<li>
							<a href="cc.node.Sprite_.html">cc.node.Sprite</a>
						</li>
						
						<li>
							<a href="cc.node.sprite.Animation.html">cc.node.sprite.Animation</a>
						</li>
						
						<li>
							<a href="cc.node.sprite.AnimationCache.html">cc.node.sprite.AnimationCache</a>
						</li>
						
						<li>
							<a href="cc.node.sprite.SpriteFrame.html">cc.node.sprite.SpriteFrame</a>
						</li>
						
						<li>
							<a href="cc.plugin.asset.AssetManager.html">cc.plugin.asset.AssetManager</a>
						</li>
						
						<li>
							<a href="cc.plugin.audio.AudioEffect.html">cc.plugin.audio.AudioEffect</a>
						</li>
						
						<li>
							<a href="cc.plugin.audio.AudioManager.html">cc.plugin.audio.AudioManager</a>
						</li>
						
						<li>
							<a href="cc.plugin.font.FontMetrics.html">cc.plugin.font.FontMetrics</a>
						</li>
						
						<li>
							<a href="cc.plugin.font.SpriteFont.html">cc.plugin.font.SpriteFont</a>
						</li>
						
						<li>
							<a href="cc.plugin.font.SpriteFontChar.html">cc.plugin.font.SpriteFontChar</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.BorderLayout.html">cc.plugin.layout.BorderLayout</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.Gap.html">cc.plugin.layout.Gap</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.GridLayout.html">cc.plugin.layout.GridLayout</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.Insets.html">cc.plugin.layout.Insets</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.LayerLayout.html">cc.plugin.layout.LayerLayout</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.Layout.html">cc.plugin.layout.Layout</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.Unit.html">cc.plugin.layout.Unit</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.Loader.html">cc.plugin.loader.Loader</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.ResourceLoaderAudioBuffer.html">cc.plugin.loader.ResourceLoaderAudioBuffer</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.ResourceLoaderImage.html">cc.plugin.loader.ResourceLoaderImage</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.ResourceLoaderJSON.html">cc.plugin.loader.ResourceLoaderJSON</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.ResourceLoaderXML.html">cc.plugin.loader.ResourceLoaderXML</a>
						</li>
						
						<li>
							<a href="cc.plugin.texture.TexturePacker.html">cc.plugin.texture.TexturePacker</a>
						</li>
						
						<li>
							<a href="cc.plugin.texture.TexturePackerNode.html">cc.plugin.texture.TexturePackerNode</a>
						</li>
						
						<li>
							<a href="cc.plugin.texture.TexturePackerPage.html">cc.plugin.texture.TexturePackerPage</a>
						</li>
						
						<li>
							<a href="cc.render.CanvasRenderer.html">cc.render.CanvasRenderer</a>
						</li>
						
						<li>
							<a href="cc.render.DecoratedWebGLRenderingContext.html">cc.render.DecoratedWebGLRenderingContext</a>
						</li>
						
						<li>
							<a href="cc.render.GeometryBatcher.html">cc.render.GeometryBatcher</a>
						</li>
						
						<li>
							<a href="cc.render.Pattern.html">cc.render.Pattern</a>
						</li>
						
						<li>
							<a href="cc.render.Renderer.html">cc.render.Renderer</a>
						</li>
						
						<li>
							<a href="cc.render.RenderingContextSnapshot.html">cc.render.RenderingContextSnapshot</a>
						</li>
						
						<li>
							<a href="cc.render.ScaleManager.html">cc.render.ScaleManager</a>
						</li>
						
						<li>
							<a href="cc.render.shader.AbstractShader.html">cc.render.shader.AbstractShader</a>
						</li>
						
						<li>
							<a href="cc.render.shader.Attribute.html">cc.render.shader.Attribute</a>
						</li>
						
						<li>
							<a href="cc.render.shader.MatrixUniform.html">cc.render.shader.MatrixUniform</a>
						</li>
						
						<li>
							<a href="cc.render.shader.SolidColorShader.html">cc.render.shader.SolidColorShader</a>
						</li>
						
						<li>
							<a href="cc.render.shader.TextureShader.html">cc.render.shader.TextureShader</a>
						</li>
						
						<li>
							<a href="cc.render.shader.TextureUniform.html">cc.render.shader.TextureUniform</a>
						</li>
						
						<li>
							<a href="cc.render.shader.Uniform.html">cc.render.shader.Uniform</a>
						</li>
						
						<li>
							<a href="cc.render.Texture2D.html">cc.render.Texture2D</a>
						</li>
						
						<li>
							<a href="cc.render.WebGLRenderer.html">cc.render.WebGLRenderer</a>
						</li>
						
						<li>
							<a href="cc.transition.Transition.html">cc.transition.Transition</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionFade.html">cc.transition.TransitionFade</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionMove.html">cc.transition.TransitionMove</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionSlideInB.html">cc.transition.TransitionSlideInB</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionSlideInL.html">cc.transition.TransitionSlideInL</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionSlideInR.html">cc.transition.TransitionSlideInR</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionSlideInT.html">cc.transition.TransitionSlideInT</a>
						</li>
						
						<li>
							<a href="cc.util.Resource.html">cc.util.Resource</a>
						</li>
						
						<li>
							<a href="cc.widget.Button.html">cc.widget.Button</a>
						</li>
						
						<li>
							<a href="cc.widget.Label.html">cc.widget.Label</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="global.html#__extends">__extends</a>
						</li>
						
						<li>
							<a href="global.html#test">test</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
			<div class="span12">
				
				<div id="main">
					


		<h1 class="page-title">Source: input/InputManager.js</h1>
    
<section>
	<article>
		<pre
			class="sunlight-highlight-javascript linenums">/**
 * License: see license.txt file.
 */
/// &lt;reference path="../node/Node.ts"/>
/// &lt;reference path="../math/Point.ts"/>
/// &lt;reference path="../locale/Locale.ts"/>
/// &lt;reference path="../util/Debug.ts"/>
/// &lt;reference path="./KeyboardInputManager.ts"/>
var cc;
(function (cc) {
    var input;
    (function (input) {
        /**
         * @class cc.input.InputManagerEvent
         * @classdesc
         *
         * This is the base type for all CocosJS input events.
         */
        var InputManagerEvent = (function () {
            /**
             * Build a new InputManagerEvent object.
             * Does nothing.
             * @method cc.input.InputManagerEvent#constructor
             */
            function InputManagerEvent() {
                /**
                 * Target is the object for which the event happened.
                 * For example, for MouseInputManagerEvents, _target is the node in which the event happened.
                 * @member cc.input.InputManagerEvent#_target
                 * @type {Object}
                 * @private
                 */
                this._target = null;
                /**
                 * Input event type.
                 * Identifies the emitted event type for each addEventListener event call.
                 * @member cc.input.InputManagerEvent#_type
                 * @type {string}
                 * @private
                 */
                this._type = null;
            }
            Object.defineProperty(InputManagerEvent.prototype, "target", {
                /**
                 * Get this event's target. The target can be any type.
                 * @method cc.input.InputManagerEvent#get:target
                 * @returns {any}
                 */
                get: function () {
                    return this._target;
                },
                enumerable: true,
                configurable: true
            });
            /**
             * Get the event target.
             * @method cc.input.InputManagerEvent#getCurrentTarget
             * @returns {cc.node.Node}
             */
            InputManagerEvent.prototype.getCurrentTarget = function () {
                return this._target;
            };
            Object.defineProperty(InputManagerEvent.prototype, "type", {
                /**
                 * Get this event's type.
                 * @method cc.input.InputManagerEvent#get:type
                 * @returns {string}
                 */
                get: function () {
                    return this._type;
                },
                enumerable: true,
                configurable: true
            });
            /**
             * Must override and honor.
             * @method cc.input.InputManagerEvent#initializeEventForTarget
             * @param target {Object} a target object.
             * @param type {string} an event type.
             *
             */
            InputManagerEvent.prototype.initializeEventForTarget = function (target, type) {
                this._target = target;
                this._type = type;
            };
            return InputManagerEvent;
        })();
        input.InputManagerEvent = InputManagerEvent;
        /**
         * @class cc.input.InputManager
         * @classdesc
         *
         * General input manager object.
         *
         */
        var InputManager = (function () {
            function InputManager() {
                this._keyboardManager = null;
                this._keyboardManager = new cc.input.KeyboardInputManager();
            }
            InputManager.prototype.enable = function (element) {
                this._keyboardManager.enable();
                cc.input.MouseInputManager.enable(element);
                return this;
            };
            InputManager.prototype.disable = function () {
                this._keyboardManager.disable();
                cc.input.MouseInputManager.disable();
                return this;
            };
            InputManager.prototype.addEventListener = function (event, callback, params) {
                if (event === "keydown") {
                    this._keyboardManager.onDown(params, callback);
                }
                else if (event === "keyup") {
                    this._keyboardManager.onUp(params, callback);
                }
            };
            InputManager.prototype.registerCursor = function (kd, callback) {
                return this._keyboardManager.registerCursor(kd, callback);
            };
            InputManager.prototype.unregisterCursor = function (id) {
                this._keyboardManager.unregisterCursor(id);
            };
            return InputManager;
        })();
        input.InputManager = InputManager;
        /**
         * @class cc.input.PriorityInputNode
         * @classdesc
         *
         * This class encapsulated a descriptor for priority input routing. Basically keeps track of a target Node and
         * a priority value.
         * These descriptors are sorted in priority value, meaning lower values will be evaluated for input first.
         */
        var PriorityInputNode = (function () {
            /**
             * Input target.
             * @member cc.input.PriorityInputNode#node
             * @type {cc.node.Node}
             */
            /**
             * Priority value.
             * @member cc.input.PriorityInputNode#priority
             * @type {number}
             */
            /**
             * @method cc.input.PriorityInputNode#constructor
             * @param node {cc.node.Node}
             * @param priority {number}
             */
            function PriorityInputNode(node, priority) {
                this.node = node;
                this.priority = priority;
            }
            return PriorityInputNode;
        })();
        input.PriorityInputNode = PriorityInputNode;
        /**
         *
         * @class cc.input.SceneGraphInputTreeNode
         * @classdesc
         *
         * Input is routed in two different ways:
         *  + prioritized: where elements are sorted in priority order.
         *  + scene graph: where elements are sorted in scene-graph order, that is, in a parent/child order.
         *
         * Some Input managers will keep a root node of this type, which has inserting/removing capabilities and keeps
         * nodes in SceneGraph order.
         *
         * Preferred way of input routing should be prioritized.
         * SceneGraph, for a large number of nodes, sounds reasonably to maintain an smaller subset of the scene graph
         * to try routing input to. For smaller amounts, sounds like not a good idea to keep a copy, and have to notify
         * each manager about scene-graph mutation operations to rebuild the nodes tree.
         *
         * The input system will traverse this tree in pre-order to test for input.
         *
         * This class will only be used for point-like input systems like mouse or touch.
         */
        var SceneGraphInputTreeNode = (function () {
            /**
             * Create a new Scene-Graph priority node/tree.
             * @method cc.input.SceneGraphInputTreeNode#constructor
             * @param node {cc.node.Node=}
             */
            function SceneGraphInputTreeNode(node) {
                /**
                 * Target Node.
                 * @member cc.input.SceneGraphInputTreeNode#node
                 * @type {cc.node.Node}
                 */
                this.node = null;
                /**
                 * This node's Scene-Graph priority children nodes.
                 * @member cc.input.SceneGraphInputTreeNode#children
                 * @type {cc.input.SceneGraphInputTreeNode}
                 */
                this.children = null;
                /**
                 * Is this node enabled ? if not, it won't be tested for input.
                 * @member cc.input.SceneGraphInputTreeNode#enabled
                 * @type {boolean}
                 */
                this.enabled = false;
                this.children = [];
                if (typeof node !== "undefined") {
                    this.node = node;
                }
            }
            /**
             * Insert a Path of nodes.
             * A path of nodes is an array of a Node, and all its ancestors.
             * These path will be added to the tree, creating nodes for missing nodes, and modifying existing ones for input
             * route enable as needed.
             * If the path does not have as top most ancestor the tree's root node, nothing will be added, and an error
             * will be sent to the console.
             * @method cc.input.SceneGraphInputTreeNode#insert
             * @param path {Array&lt;cc.node.Node>}
             */
            SceneGraphInputTreeNode.prototype.insert = function (path) {
                var lastNode = path[path.length - 1];
                if (lastNode === this.node) {
                    return this.__insertImpl(this, path);
                }
                else {
                    cc.Debug.warn(cc.locale.INPUT_WARN_WRONG_ROOT_NODE);
                }
                return null;
            };
            /**
             * Node path insertion implementation.
             * @method cc.input.SceneGraphInputTreeNode#__insertImpl
             * @param inputNode {cc.input.SceneGraphInputTreeNode} a tree node.
             * @param path {Array&lt;cc.node.Node>} node path.
             * @returns {cc.input.SceneGraphInputTreeNode}
             * @private
             */
            SceneGraphInputTreeNode.prototype.__insertImpl = function (inputNode, path) {
                var pathNode = path.pop();
                // adding input to the inputNode.
                if (pathNode !== inputNode.node) {
                    // the node is not of this input tree node.
                    // add it as children, and go on.
                    inputNode = inputNode.addChildInputNode(pathNode);
                }
                if (path.length === 0) {
                    inputNode.enabled = true;
                }
                else {
                    return this.__insertImpl(inputNode, path);
                }
                return inputNode;
            };
            /**
             * Add a node as a Scene-Graph priority tree node's child.
             * @method cc.input.SceneGraphInputTreeNode#addChildInputNode
             * @param node {cc.node.Node}
             * @returns {*}
             */
            SceneGraphInputTreeNode.prototype.addChildInputNode = function (node) {
                for (var i = 0; i &lt; this.children.length; i++) {
                    if (this.children[i].node === node) {
                        return this.children[i];
                    }
                }
                // the node is not as children
                var newInputNode = new SceneGraphInputTreeNode(node);
                this.children.push(newInputNode);
                this.children.sort(function (sn0, sn1) {
                    // nodes for input are sorted inversely, input goes to the top most.
                    var n0 = sn0.node;
                    var n1 = sn1.node;
                    if (n0._localZOrder &lt; n1._localZOrder) {
                        return 1;
                    }
                    if (n0._localZOrder > n1._localZOrder) {
                        return -1;
                    }
                    return n0._orderOfArrival &lt; n1._orderOfArrival ? 1 : -1;
                });
                return newInputNode;
            };
            /**
             * Flatten this tree and get an array of pre-order sorted nodes.
             * @method cc.input.SceneGraphInputTreeNode#flatten
             * @returns {Array&lt;cc.node.Node>}
             */
            SceneGraphInputTreeNode.prototype.flatten = function () {
                var ret = [];
                this.__flattenImpl(this, ret);
                return ret;
            };
            /**
             * Tree flatten operation implementation.
             * @method cc.input.SceneGraphInputTreeNode#__flattenImpl
             * @param inputNode {cc.input.SceneGraphInputTreeNode} a tree node.
             * @param nodes {Array&lt;cc.node.Node>} an array to push the sorted nodes.
             * @private
             */
            SceneGraphInputTreeNode.prototype.__flattenImpl = function (inputNode, nodes) {
                var i;
                for (i = 0; i &lt; inputNode.children.length; i++) {
                    this.__flattenImpl(inputNode.children[i], nodes);
                }
                // all enabled nodes, must be added to the list of enabled elements.
                if (inputNode.enabled) {
                    nodes.push(inputNode.node);
                }
            };
            /**
             * For an screen position, get the first node that is at that position and has input enabled.
             * This will be the target of the pointer input operation.
             * @method cc.input.SceneGraphInputTreeNode#findNodeAtScreenPoint
             * @param e {cc.input.MouseInputManager}
             * @returns {cc.node.Node}
             */
            SceneGraphInputTreeNode.prototype.findNodeAtScreenPoint = function (p, callback) {
                var node = this.__findNodeAtScreenPoint(this, p, callback);
                if (!node &amp;&amp; callback) {
                    callback(null);
                }
                return node;
            };
            /**
             * findNodeAtScreenPoint's implementation
             * @method cc.input.SceneGraphInputTreeNode#__findNodeAtScreenPoint
             * @param inputNode {cc.input.SceneGraphInputTreeNode}
             * @param e {cc.input.MouseInputManager}
             * @returns {cc.node.Node}
             * @private
             */
            SceneGraphInputTreeNode.prototype.__findNodeAtScreenPoint = function (inputNode, p, callback) {
                var i;
                var pp = new cc.math.Vector();
                pp.set(p.x, p.y);
                for (i = 0; i &lt; inputNode.children.length; i++) {
                    var node = this.__findNodeAtScreenPoint(inputNode.children[i], p, callback);
                    if (node) {
                        return node;
                    }
                }
                // all enabled nodes, must be added to the list of enabled elements.
                if (inputNode.enabled) {
                    var node = inputNode.node;
                    p.set(pp.x, pp.y);
                    if (node.isScreenPointInNode(p)) {
                        //return node;
                        if (callback) {
                            if (!callback(node)) {
                                return node;
                            }
                            p.set(pp.x, pp.y);
                        }
                        else {
                            return node;
                        }
                    }
                }
                p.set(pp.x, pp.y);
                return null;
            };
            return SceneGraphInputTreeNode;
        })();
        input.SceneGraphInputTreeNode = SceneGraphInputTreeNode;
    })(input = cc.input || (cc.input = {}));
})(cc || (cc = {}));
</pre>
	</article>
</section>





				</div>

				<div class="clearfix"></div>
				<footer>
					
					@hyperandroid
					<br />
					
					
		<span class="copyright">
		Chukong inc. 2014
		</span>
					<br />
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a>
		on 23/Tu/2015 using the <a
			href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<br clear="both">
		</div>

	</div>
	<!--<script src="scripts/sunlight.js"></script>-->
	<script src="scripts/docstrap.lib.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>

	<script>
		$( function () {
			$( "[id*='$']" ).each( function () {
				var $this = $( this );

				$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
			} );

			$( "#toc" ).toc( {
				anchorName  : function ( i, heading, prefix ) {
					return $( heading ).attr( "id" ) || ( prefix + i );
				},
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : "100px"
			} );

			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );
			$( '.dropdown-toggle' ).dropdown();
//			$( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

			$( ".tutorial-section pre, .readme-section pre" ).each( function () {
				var $this = $( this );

				var example = $this.find( "code" );
				exampleText = example.html();
				var lang = /{@lang (.*?)}/.exec( exampleText );
				if ( lang && lang[1] ) {
					exampleText = exampleText.replace( lang[0], "" );
					example.html( exampleText );
					lang = lang[1];
				} else {
					lang = "javascript";
				}

				if ( lang ) {

					$this
						.addClass( "sunlight-highlight-" + lang )
						.addClass( "linenums" )
						.html( example.html() );

				}
			} );

			Sunlight.highlightAll( {
				lineNumbers : true,
				showMenu : true,
				enableDoclinks : true
			} );
		} );
	 </script>



	<!--Navigation and Symbol Display-->
	


	<!--Google Analytics-->
	

</body>
</html>
