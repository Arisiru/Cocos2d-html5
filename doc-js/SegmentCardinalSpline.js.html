<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>CocosJS Source: math/path/SegmentCardinalSpline.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.cerulean.css">

</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top ">
		<div class="navbar-inner">
			<a class="brand" href="index.html">CocosJS</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="global.html#cc">cc</a>
						</li>
						
						<li>
							<a href="global.html#cc#action">cc.action</a>
						</li>
						
						<li>
							<a href="cc.Debug.html">cc.Debug</a>
						</li>
						
						<li>
							<a href="cc.game.html">cc.game</a>
						</li>
						
						<li>
							<a href="cc.input.html">cc.input</a>
						</li>
						
						<li>
							<a href="cc.locale.html">cc.locale</a>
						</li>
						
						<li>
							<a href="cc.math.html">cc.math</a>
						</li>
						
						<li>
							<a href="cc.math.path_.html">cc.math.path</a>
						</li>
						
						<li>
							<a href="cc.node.html">cc.node</a>
						</li>
						
						<li>
							<a href="cc.node.sprite.html">cc.node.sprite</a>
						</li>
						
						<li>
							<a href="cc.plugin.html">cc.plugin</a>
						</li>
						
						<li>
							<a href="cc.plugin.asset.html">cc.plugin.asset</a>
						</li>
						
						<li>
							<a href="cc.plugin.audio.html">cc.plugin.audio</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.html">cc.plugin.layout</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.html">cc.plugin.loader</a>
						</li>
						
						<li>
							<a href="cc.plugin.texture.html">cc.plugin.texture</a>
						</li>
						
						<li>
							<a href="cc.render.html">cc.render</a>
						</li>
						
						<li>
							<a href="cc.render.shader.html">cc.render.shader</a>
						</li>
						
						<li>
							<a href="cc.render.WebGLState.html">cc.render.WebGLState</a>
						</li>
						
						<li>
							<a href="cc.transition.html">cc.transition</a>
						</li>
						
						<li>
							<a href="cc.util.html">cc.util</a>
						</li>
						
						<li>
							<a href="cc.widget.html">cc.widget</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="cc.action.Action.html">cc.action.Action</a>
						</li>
						
						<li>
							<a href="cc.action.ActionChainContext.html">cc.action.ActionChainContext</a>
						</li>
						
						<li>
							<a href="cc.action.ActionChainContext_constructor.html">cc.action.ActionChainContext#constructor</a>
						</li>
						
						<li>
							<a href="cc.action.ActionInfo.html">cc.action.ActionInfo</a>
						</li>
						
						<li>
							<a href="cc.action.ActionManager.html">cc.action.ActionManager</a>
						</li>
						
						<li>
							<a href="cc.action.AlphaAction.html">cc.action.AlphaAction</a>
						</li>
						
						<li>
							<a href="cc.action.AnimateAction.html">cc.action.AnimateAction</a>
						</li>
						
						<li>
							<a href="cc.action.Interpolator.html">cc.action.Interpolator</a>
						</li>
						
						<li>
							<a href="cc.action.JumpAction.html">cc.action.JumpAction</a>
						</li>
						
						<li>
							<a href="cc.action.MoveAction.html">cc.action.MoveAction</a>
						</li>
						
						<li>
							<a href="cc.action.ParseInterpolator.html">cc.action.ParseInterpolator</a>
						</li>
						
						<li>
							<a href="cc.action.PathAction.html">cc.action.PathAction</a>
						</li>
						
						<li>
							<a href="cc.action.PropertyAction.html">cc.action.PropertyAction</a>
						</li>
						
						<li>
							<a href="cc.action.PropertyInfo.html">cc.action.PropertyInfo</a>
						</li>
						
						<li>
							<a href="cc.action.RotateAction.html">cc.action.RotateAction</a>
						</li>
						
						<li>
							<a href="cc.action.ScaleAction.html">cc.action.ScaleAction</a>
						</li>
						
						<li>
							<a href="cc.action.SchedulerQueue.html">cc.action.SchedulerQueue</a>
						</li>
						
						<li>
							<a href="cc.action.SchedulerQueueTask.html">cc.action.SchedulerQueueTask</a>
						</li>
						
						<li>
							<a href="cc.action.SequenceAction.html">cc.action.SequenceAction</a>
						</li>
						
						<li>
							<a href="cc.action.TintAction.html">cc.action.TintAction</a>
						</li>
						
						<li>
							<a href="cc.game.Game.html">cc.game.Game</a>
						</li>
						
						<li>
							<a href="cc.input.InputManager.html">cc.input.InputManager</a>
						</li>
						
						<li>
							<a href="cc.input.InputManagerEvent.html">cc.input.InputManagerEvent</a>
						</li>
						
						<li>
							<a href="cc.input.KeyActionInfo.html">cc.input.KeyActionInfo</a>
						</li>
						
						<li>
							<a href="cc.input.KeyboardCursor.html">cc.input.KeyboardCursor</a>
						</li>
						
						<li>
							<a href="cc.input.KeyboardInputManager.html">cc.input.KeyboardInputManager</a>
						</li>
						
						<li>
							<a href="cc.input.KeyInfo.html">cc.input.KeyInfo</a>
						</li>
						
						<li>
							<a href="cc.input.MouseInputManager.html">cc.input.MouseInputManager</a>
						</li>
						
						<li>
							<a href="cc.input.MouseInputManagerEvent.html">cc.input.MouseInputManagerEvent</a>
						</li>
						
						<li>
							<a href="cc.input.PriorityInputNode.html">cc.input.PriorityInputNode</a>
						</li>
						
						<li>
							<a href="cc.input.SceneGraphInputTreeNode.html">cc.input.SceneGraphInputTreeNode</a>
						</li>
						
						<li>
							<a href="cc.math.Color.html">cc.math.Color</a>
						</li>
						
						<li>
							<a href="cc.math.Dimension.html">cc.math.Dimension</a>
						</li>
						
						<li>
							<a href="cc.math.Matrix3.html">cc.math.Matrix3</a>
						</li>
						
						<li>
							<a href="cc.math.Path.html">cc.math.Path</a>
						</li>
						
						<li>
							<a href="cc.math.path.ContainerSegment.html">cc.math.path.ContainerSegment</a>
						</li>
						
						<li>
							<a href="cc.math.path.SegmentArc.html">cc.math.path.SegmentArc</a>
						</li>
						
						<li>
							<a href="cc.math.path.SegmentBezier.html">cc.math.path.SegmentBezier</a>
						</li>
						
						<li>
							<a href="cc.math.path.SegmentCardinalSpline.html">cc.math.path.SegmentCardinalSpline</a>
						</li>
						
						<li>
							<a href="cc.math.path_.html#SegmentLine">cc.math.path.SegmentLine</a>
						</li>
						
						<li>
							<a href="cc.math.path.SegmentQuadratic.html">cc.math.path.SegmentQuadratic</a>
						</li>
						
						<li>
							<a href="cc.math.path.SubPath.html">cc.math.path.SubPath</a>
						</li>
						
						<li>
							<a href="cc.math.Rectangle.html">cc.math.Rectangle</a>
						</li>
						
						<li>
							<a href="cc.math.Vector.html">cc.math.Vector</a>
						</li>
						
						<li>
							<a href="cc.node.Director.html">cc.node.Director</a>
						</li>
						
						<li>
							<a href="cc.node.FastSprite.html">cc.node.FastSprite</a>
						</li>
						
						<li>
							<a href="cc.node.Node.html">cc.node.Node</a>
						</li>
						
						<li>
							<a href="cc.node.Scene.html">cc.node.Scene</a>
						</li>
						
						<li>
							<a href="cc.node.Sprite_.html">cc.node.Sprite</a>
						</li>
						
						<li>
							<a href="cc.node.sprite.Animation.html">cc.node.sprite.Animation</a>
						</li>
						
						<li>
							<a href="cc.node.sprite.AnimationCache.html">cc.node.sprite.AnimationCache</a>
						</li>
						
						<li>
							<a href="cc.node.sprite.SpriteFrame.html">cc.node.sprite.SpriteFrame</a>
						</li>
						
						<li>
							<a href="cc.plugin.asset.AssetManager.html">cc.plugin.asset.AssetManager</a>
						</li>
						
						<li>
							<a href="cc.plugin.audio.AudioEffect.html">cc.plugin.audio.AudioEffect</a>
						</li>
						
						<li>
							<a href="cc.plugin.audio.AudioManager.html">cc.plugin.audio.AudioManager</a>
						</li>
						
						<li>
							<a href="cc.plugin.font.FontMetrics.html">cc.plugin.font.FontMetrics</a>
						</li>
						
						<li>
							<a href="cc.plugin.font.SpriteFont.html">cc.plugin.font.SpriteFont</a>
						</li>
						
						<li>
							<a href="cc.plugin.font.SpriteFontChar.html">cc.plugin.font.SpriteFontChar</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.BorderLayout.html">cc.plugin.layout.BorderLayout</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.Gap.html">cc.plugin.layout.Gap</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.GridLayout.html">cc.plugin.layout.GridLayout</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.Insets.html">cc.plugin.layout.Insets</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.LayerLayout.html">cc.plugin.layout.LayerLayout</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.Layout.html">cc.plugin.layout.Layout</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.Unit.html">cc.plugin.layout.Unit</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.Loader.html">cc.plugin.loader.Loader</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.ResourceLoaderAudioBuffer.html">cc.plugin.loader.ResourceLoaderAudioBuffer</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.ResourceLoaderImage.html">cc.plugin.loader.ResourceLoaderImage</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.ResourceLoaderJSON.html">cc.plugin.loader.ResourceLoaderJSON</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.ResourceLoaderXML.html">cc.plugin.loader.ResourceLoaderXML</a>
						</li>
						
						<li>
							<a href="cc.plugin.texture.TexturePacker.html">cc.plugin.texture.TexturePacker</a>
						</li>
						
						<li>
							<a href="cc.plugin.texture.TexturePackerNode.html">cc.plugin.texture.TexturePackerNode</a>
						</li>
						
						<li>
							<a href="cc.plugin.texture.TexturePackerPage.html">cc.plugin.texture.TexturePackerPage</a>
						</li>
						
						<li>
							<a href="cc.render.CanvasRenderer.html">cc.render.CanvasRenderer</a>
						</li>
						
						<li>
							<a href="cc.render.DecoratedWebGLRenderingContext.html">cc.render.DecoratedWebGLRenderingContext</a>
						</li>
						
						<li>
							<a href="cc.render.GeometryBatcher.html">cc.render.GeometryBatcher</a>
						</li>
						
						<li>
							<a href="cc.render.Pattern.html">cc.render.Pattern</a>
						</li>
						
						<li>
							<a href="cc.render.Renderer.html">cc.render.Renderer</a>
						</li>
						
						<li>
							<a href="cc.render.RenderingContextSnapshot.html">cc.render.RenderingContextSnapshot</a>
						</li>
						
						<li>
							<a href="cc.render.ScaleManager.html">cc.render.ScaleManager</a>
						</li>
						
						<li>
							<a href="cc.render.shader.AbstractShader.html">cc.render.shader.AbstractShader</a>
						</li>
						
						<li>
							<a href="cc.render.shader.Attribute.html">cc.render.shader.Attribute</a>
						</li>
						
						<li>
							<a href="cc.render.shader.MatrixUniform.html">cc.render.shader.MatrixUniform</a>
						</li>
						
						<li>
							<a href="cc.render.shader.SolidColorShader.html">cc.render.shader.SolidColorShader</a>
						</li>
						
						<li>
							<a href="cc.render.shader.TextureShader.html">cc.render.shader.TextureShader</a>
						</li>
						
						<li>
							<a href="cc.render.shader.TextureUniform.html">cc.render.shader.TextureUniform</a>
						</li>
						
						<li>
							<a href="cc.render.shader.Uniform.html">cc.render.shader.Uniform</a>
						</li>
						
						<li>
							<a href="cc.render.Texture2D.html">cc.render.Texture2D</a>
						</li>
						
						<li>
							<a href="cc.render.WebGLRenderer.html">cc.render.WebGLRenderer</a>
						</li>
						
						<li>
							<a href="cc.transition.Transition.html">cc.transition.Transition</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionFade.html">cc.transition.TransitionFade</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionMove.html">cc.transition.TransitionMove</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionSlideInB.html">cc.transition.TransitionSlideInB</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionSlideInL.html">cc.transition.TransitionSlideInL</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionSlideInR.html">cc.transition.TransitionSlideInR</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionSlideInT.html">cc.transition.TransitionSlideInT</a>
						</li>
						
						<li>
							<a href="cc.util.Resource.html">cc.util.Resource</a>
						</li>
						
						<li>
							<a href="cc.widget.Button.html">cc.widget.Button</a>
						</li>
						
						<li>
							<a href="cc.widget.Label.html">cc.widget.Label</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="global.html#__extends">__extends</a>
						</li>
						
						<li>
							<a href="global.html#test">test</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
			<div class="span12">
				
				<div id="main">
					


		<h1 class="page-title">Source: math/path/SegmentCardinalSpline.js</h1>
    
<section>
	<article>
		<pre
			class="sunlight-highlight-javascript linenums">/**
 * License: see license.txt file
 */
/// &lt;reference path="../Point.ts"/>
/// &lt;reference path="./Segment.ts"/>
/// &lt;reference path="./ContainerSegment.ts"/>
/// &lt;reference path="../Path.ts"/>
/// &lt;reference path="../../render/RenderingContext.ts"/>
var cc;
(function (cc) {
    var math;
    (function (math) {
        var path;
        (function (_path) {
            var Vector = cc.math.Vector;
            var __v0 = new Vector();
            /**
             * @class cc.math.path.SegmentCardinalSpline
             * @implements cc.math.path.Segment
             * @classdesc
             *
             * This Object is a Quadratic Bezier Segment.
             * &lt;p>
             *     It is composed of two points and a tension control point. Internally, the Segment can cache its contour.
             * &lt;p>
             *     The contour can be of two different types:
             *     + directly traced over the curve. Leaves points at different distances on the curve.
             *     + equi-distant on the curve. Internally traces the points as in the other type, but then creates a polyline
             *       path with the points, and samples the resulting path at regular intervals. This transforms the curve into
             *       a polyline, which is faster for most calculations, but could not be as smooth as the other type.
             * &lt;p>
             * By default, the curve is calculated with the first type, directly tracing on the curve
             *
             */
            var SegmentCardinalSpline = (function () {
                /**
                 * Create a new Quadratic Segment instance.
                 * @param data {cc.math.path.SegmentCardinalSplineInitializer=}
                 */
                function SegmentCardinalSpline(data) {
                    /**
                     * Start Cubic curve point.
                     * @member cc.math.path.SegmentCardinalSpline#_p0
                     * @type {cc.math.Vector}
                     * @private
                     */
                    this._p0 = null;
                    /**
                     * First Cubic curve control point.
                     * @member cc.math.path.SegmentCardinalSpline#_cp0
                     * @type {cc.math.Vector}
                     * @private
                     */
                    this._cp0 = null;
                    /**
                     * Second Cubic curve control point.
                     * @member cc.math.path.SegmentCardinalSpline#_cp1
                     * @type {cc.math.Vector}
                     * @private
                     */
                    this._cp1 = null;
                    /**
                     * End Cubic curve point.
                     * @member cc.math.path.SegmentCardinalSpline#_p1
                     * @type {cc.math.Vector}
                     * @private
                     */
                    this._p1 = null;
                    this._tension = .5;
                    /**
                     * Internal flag for cache validity.
                     * @member cc.math.path.SegmentCardinalSpline#_dirty
                     * @type {boolean}
                     * @private
                     */
                    this._dirty = true;
                    /**
                     * Parent segment.
                     * @member cc.math.path.SegmentCardinalSpline#_parent
                     * @type {cc.math.path.Segment}
                     * @private
                     */
                    this._parent = null;
                    /**
                     * Segment length. It is approximately calculated by subdividing the curve.
                     * @member cc.math.path.SegmentCardinalSpline#_length
                     * @type {number}
                     * @private
                     */
                    this._length = 0;
                    /**
                     * Whether the Quadratic is internally treated as a polyline.
                     * @member cc.math.path.SegmentCardinalSpline#_flattened
                     * @type {boolean}
                     * @private
                     */
                    this._flattened = false;
                    /**
                     * A cache of points on the curve. This is approximation with which the length is calculated.
                     * @member cc.math.path.SegmentCardinalSpline#_cachedContourPoints
                     * @type {Array&lt;cc.math.Vector>}
                     * @private
                     */
                    this._cachedContourPoints = null;
                    if (data) {
                        this.initialize(data.p0, data.cp0, data.cp1, data.p1, data.tension);
                    }
                }
                /**
                 * Initialize the Segment with the supplied points.
                 * @param p0 {cc.math.Point}
                 * @param cp0 {cc.math.Point}
                 * @param cp1 {cc.math.Point}
                 * @param p1 {cc.math.Point}
                 * @param tension {number}
                 */
                SegmentCardinalSpline.prototype.initialize = function (p0, cp0, cp1, p1, tension) {
                    this._tension = typeof tension === "undefined" ? 0.5 : tension;
                    this._p0 = new Vector(p0.x, p0.y);
                    this._cp0 = new Vector(cp0.x, cp0.y);
                    this._cp1 = new Vector(cp1.x, cp1.y);
                    this._p1 = new Vector(p1.x, p1.y);
                    this.__update();
                    this._dirty = false;
                };
                /**
                 * Set Segment tension. By default it is 0.5
                 * Setting a different tension will mark the segment as dirty, nulling all internal caches.
                 * @param t {number}
                 */
                SegmentCardinalSpline.prototype.setTension = function (t) {
                    if (t !== this._tension) {
                        this._tension = t;
                        this.setDirty();
                    }
                };
                /**
                 * Flatten this Segment and consider it a polyline with equidistant points.
                 * @param numPoints {number=} Number of points (meaning numPoints-1 line segments). If not set, the number of
                 *        points will be a default value. (you are good by not supplying a value).
                 * @returns {cc.math.path.SegmentCardinalSpline}
                 */
                SegmentCardinalSpline.prototype.flatten = function (numPoints) {
                    // already flattened and with the same amount of points ? do nothing dude.
                    if (!this._dirty &amp;&amp; this._flattened &amp;&amp; numPoints === this._cachedContourPoints.length) {
                        return;
                    }
                    numPoints = numPoints || cc.math.path.DEFAULT_TRACE_LENGTH;
                    // trace this quadratic segment
                    var points = this.__trace(null, numPoints);
                    // build a polyline of the specified number of points, or as much as twice the traced contour.
                    // twice, since after all, we are approximating a curve to lines. and this is just preprocess, won't hurt
                    // the long term.
                    numPoints = numPoints || points.length * 2;
                    // now path is a polyline which is not proportionally sampled.
                    var path = cc.math.Path.createFromPoints(points);
                    // sample the path and get another polyline with each point at a regular distance.
                    points = [];
                    path.trace(numPoints, points);
                    // signal flattened data
                    this._flattened = true;
                    // save data for later usage
                    this._cachedContourPoints = points;
                    // update segment length
                    this.__calculateLength();
                    // not dirty, caches and length are freshly calculated
                    this._dirty = false;
                    return this;
                };
                SegmentCardinalSpline.prototype.__trace = function (points, numPoints) {
                    points = points || [];
                    for (var i = 0; i &lt;= numPoints; i++) {
                        points.push(this.getValueAt(i / numPoints, new Vector()));
                    }
                    return points;
                };
                /**
                 * Update the Quadratic Segment info.
                 * @param numPoints {number=}
                 * @private
                 */
                SegmentCardinalSpline.prototype.__update = function (numPoints) {
                    this._dirty = false;
                    numPoints = numPoints || (this._cachedContourPoints &amp;&amp; this._cachedContourPoints.length) || cc.math.path.DEFAULT_TRACE_LENGTH;
                    // and was flattened
                    if (this._flattened) {
                        // recalculate polyline of equally distributed points
                        this.flatten();
                    }
                    else {
                        // was not flattened
                        this._cachedContourPoints = [];
                        this.__trace(this._cachedContourPoints, numPoints);
                    }
                    this.__calculateLength();
                };
                SegmentCardinalSpline.prototype.__calculateLength = function () {
                    var points = this._cachedContourPoints;
                    // calculate distance
                    this._length = 0;
                    for (var i = 0; i &lt; points.length - 1; i++) {
                        this._length += points[i].distance(points[i + 1]);
                    }
                };
                /**
                 * Get the Segment's parent Segment.
                 * @method cc.math.path.SegmentCardinalSpline#getParent
                 * @returns {cc.math.path.Segment}
                 */
                SegmentCardinalSpline.prototype.getParent = function () {
                    return this._parent;
                };
                /**
                 * Set the Segment's parent Segment.
                 * @method cc.math.path.SegmentCardinalSpline#setParent
                 * @param s {cc.math.path.Segment}
                 */
                SegmentCardinalSpline.prototype.setParent = function (s) {
                    this._parent = s;
                };
                /**
                 * Get the Segment length.
                 * @override
                 * @method cc.math.path.SegmentCardinalSpline#getLength
                 * @returns {number}
                 */
                SegmentCardinalSpline.prototype.getLength = function () {
                    if (this._dirty) {
                        this.__update();
                    }
                    return this._length;
                };
                /**
                 * Sample some points on the segment. It will return either the sampled contour, or the flattened version of it.
                 * It returns the points that conform the Segment contour, if they are changed, the contour will be changed as well.
                 * @method cc.math.path.SegmentCardinalSpline#trace
                 * @param numPoints {number=} number of points traced on the segment.
                 * @param dstArray {Array&lt;cc.math.Vector>=} array where to add the traced points.
                 * @returns {Array&lt;Vector>} returns the supplied array of points, or a new array of points if not set.
                 */
                SegmentCardinalSpline.prototype.trace = function (numPoints, dstArray) {
                    if (this._dirty &amp;&amp; this._flattened) {
                        this.__update(numPoints);
                    }
                    dstArray = dstArray || [];
                    // copy flattened polyline to dst array.
                    if (this._cachedContourPoints !== dstArray) {
                        for (var i = 0; i &lt; this._cachedContourPoints.length; i++) {
                            dstArray.push(this._cachedContourPoints[i]);
                        }
                    }
                    return dstArray;
                };
                /**
                 * Get a point on the Segment at the given proportional position.
                 * + If the segment is flattened, the value will be calculated from the internally cached curve contour.
                 * + If not, if will be calculated by solving the curve.
                 * The first is faster, but could be inaccurate for curves with a los number of flattened cached points.
                 * @param normalizedPos {number} value in the range 0..1
                 * @param out {cc.math.Vector=} optional out point. if not set, an internal spare point will be used.
                 * @returns {cc.math.Vector} a point on the segment at the given position. This point should be copied,
                 * successive calls to getValue will return the same point instance.
                 */
                SegmentCardinalSpline.prototype.getValueAt = function (normalizedPos, out) {
                    // if dirty, update curve info
                    if (this._dirty) {
                        this.__update();
                    }
                    // no out point, use a spare internal one. WARNING, will be continuously reused.
                    out = out || __v0;
                    // fix normalization values, just in case.
                    if (normalizedPos > 1 || normalizedPos &lt; -1) {
                        normalizedPos %= 1;
                    }
                    if (normalizedPos &lt; 0) {
                        normalizedPos += 1;
                    }
                    if (this._flattened) {
                        var fp = this._cachedContourPoints;
                        var segment = (normalizedPos * fp.length - 1);
                        normalizedPos = (segment - (segment | 0)) / (1 / (fp.length - 1));
                        segment |= 0;
                        out.x = fp[segment].x + (fp[segment + 1].x - fp[segment].x) * normalizedPos;
                        out.y = fp[segment].y + (fp[segment + 1].y - fp[segment].y) * normalizedPos;
                    }
                    else {
                        if (normalizedPos === 1) {
                            var lp = this.getEndingPoint();
                            out.set(lp.x, lp.y);
                        }
                        else if (normalizedPos === 0) {
                            var fp_ = this.getStartingPoint();
                            out.set(fp_.x, fp_.y);
                        }
                        else {
                            var t = normalizedPos;
                            var t2 = t * t;
                            var t3 = t2 * t;
                            var s = (1 - this._tension) / 2;
                            var b1 = s * ((-t3 + (2 * t2)) - t); // s(-t3 + 2 t2 - t)P1
                            var b2 = s * (-t3 + t2) + (2 * t3 - 3 * t2 + 1); // s(-t3 + t2)P2 + (2 t3 - 3 t2 + 1)P2
                            var b3 = s * (t3 - 2 * t2 + t) + (-2 * t3 + 3 * t2); // s(t3 - 2 t2 + t)P3 + (-2 t3 + 3 t2)P3
                            var b4 = s * (t3 - t2); // s(t3 - t2)P4
                            out.x = this._p0.x * b1 + this._cp0.x * b2 + this._cp1.x * b3 + this._p1.x * b4;
                            out.y = this._p0.y * b1 + this._cp0.y * b2 + this._cp1.y * b3 + this._p1.y * b4;
                        }
                    }
                    return out;
                };
                /**
                 * Get the Segment's starting point.
                 * It returns the original starting Point reference, not a copy of it.
                 * @returns {cc.math.Vector}
                 */
                SegmentCardinalSpline.prototype.getStartingPoint = function () {
                    return this._cp0;
                };
                /**
                 * Get the Segment's ending point.
                 * It returns the original starting Point reference, not a copy of it.
                 * @returns {cc.math.Vector}
                 */
                SegmentCardinalSpline.prototype.getEndingPoint = function () {
                    return this._cp1;
                };
                /**
                 * Make a clone of the segment.
                 * @method cc.math.path.SegmentCardinalSpline#clone
                 * @returns {cc.math.path.Segment}
                 */
                SegmentCardinalSpline.prototype.clone = function () {
                    var segment = new SegmentCardinalSpline({
                        p0: this._p0,
                        cp0: this._cp0,
                        cp1: this._cp1,
                        p1: this._p1,
                        tension: this._tension
                    });
                    if (this._flattened) {
                        segment.flatten(this._cachedContourPoints.length);
                    }
                    segment._length = this._length;
                    return segment;
                };
                /**
                 * Add this Segment control points to the array.
                 * If the array is not set, a new one will be created.
                 * The actual Segment points are added, so modifying them means modifying the path.
                 * @method cc.math.path.SegmentCardinalSpline#getControlPoints
                 * @param arr {Array&lt;cc.math.Vector>}
                 * @returns {Array&lt;cc.math.Vector>}
                 */
                SegmentCardinalSpline.prototype.getControlPoints = function (arr) {
                    arr = arr || [];
                    arr.push(this._p0);
                    arr.push(this._cp0);
                    arr.push(this._cp1);
                    arr.push(this._p1);
                    return arr;
                };
                /**
                 * Mark the quadratic as dirty. Mark internal polilyne info as invalid.
                 * @methodcc.math.path.SegmentCardinalSpline#setDirty
                 */
                /**
                 * Mark the Segment dirty.
                 * No action for Arcs.
                 * @method cc.math.path.ContainerSegment#setDirty
                 */
                SegmentCardinalSpline.prototype.setDirty = function () {
                    this._dirty = true;
                    var p = this._parent;
                    while (p) {
                        p.setDirty();
                        p = p._parent;
                    }
                };
                SegmentCardinalSpline.prototype.paint = function (ctx) {
                    ctx.beginPath();
                    ctx.moveTo(this._cachedContourPoints[0].x, this._cachedContourPoints[0].y);
                    for (var i = 1; i &lt; this._cachedContourPoints.length; i++) {
                        ctx.lineTo(this._cachedContourPoints[i].x, this._cachedContourPoints[i].y);
                    }
                    ctx.stroke();
                };
                return SegmentCardinalSpline;
            })();
            _path.SegmentCardinalSpline = SegmentCardinalSpline;
        })(path = math.path || (math.path = {}));
    })(math = cc.math || (cc.math = {}));
})(cc || (cc = {}));
</pre>
	</article>
</section>





				</div>

				<div class="clearfix"></div>
				<footer>
					
					@hyperandroid
					<br />
					
					
		<span class="copyright">
		Chukong inc. 2014
		</span>
					<br />
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a>
		on 23/Tu/2015 using the <a
			href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<br clear="both">
		</div>

	</div>
	<!--<script src="scripts/sunlight.js"></script>-->
	<script src="scripts/docstrap.lib.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>

	<script>
		$( function () {
			$( "[id*='$']" ).each( function () {
				var $this = $( this );

				$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
			} );

			$( "#toc" ).toc( {
				anchorName  : function ( i, heading, prefix ) {
					return $( heading ).attr( "id" ) || ( prefix + i );
				},
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : "100px"
			} );

			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );
			$( '.dropdown-toggle' ).dropdown();
//			$( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

			$( ".tutorial-section pre, .readme-section pre" ).each( function () {
				var $this = $( this );

				var example = $this.find( "code" );
				exampleText = example.html();
				var lang = /{@lang (.*?)}/.exec( exampleText );
				if ( lang && lang[1] ) {
					exampleText = exampleText.replace( lang[0], "" );
					example.html( exampleText );
					lang = lang[1];
				} else {
					lang = "javascript";
				}

				if ( lang ) {

					$this
						.addClass( "sunlight-highlight-" + lang )
						.addClass( "linenums" )
						.html( example.html() );

				}
			} );

			Sunlight.highlightAll( {
				lineNumbers : true,
				showMenu : true,
				enableDoclinks : true
			} );
		} );
	 </script>



	<!--Navigation and Symbol Display-->
	


	<!--Google Analytics-->
	

</body>
</html>
