<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>CocosJS Source: math/path/BezierTracer.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.cerulean.css">

</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top ">
		<div class="navbar-inner">
			<a class="brand" href="index.html">CocosJS</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="global.html#cc">cc</a>
						</li>
						
						<li>
							<a href="global.html#cc#action">cc.action</a>
						</li>
						
						<li>
							<a href="cc.Debug.html">cc.Debug</a>
						</li>
						
						<li>
							<a href="cc.game.html">cc.game</a>
						</li>
						
						<li>
							<a href="cc.input.html">cc.input</a>
						</li>
						
						<li>
							<a href="cc.locale.html">cc.locale</a>
						</li>
						
						<li>
							<a href="cc.math.html">cc.math</a>
						</li>
						
						<li>
							<a href="cc.math.path_.html">cc.math.path</a>
						</li>
						
						<li>
							<a href="cc.node.html">cc.node</a>
						</li>
						
						<li>
							<a href="cc.node.sprite.html">cc.node.sprite</a>
						</li>
						
						<li>
							<a href="cc.plugin.html">cc.plugin</a>
						</li>
						
						<li>
							<a href="cc.plugin.asset.html">cc.plugin.asset</a>
						</li>
						
						<li>
							<a href="cc.plugin.audio.html">cc.plugin.audio</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.html">cc.plugin.layout</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.html">cc.plugin.loader</a>
						</li>
						
						<li>
							<a href="cc.plugin.texture.html">cc.plugin.texture</a>
						</li>
						
						<li>
							<a href="cc.render.html">cc.render</a>
						</li>
						
						<li>
							<a href="cc.render.shader.html">cc.render.shader</a>
						</li>
						
						<li>
							<a href="cc.render.WebGLState.html">cc.render.WebGLState</a>
						</li>
						
						<li>
							<a href="cc.transition.html">cc.transition</a>
						</li>
						
						<li>
							<a href="cc.util.html">cc.util</a>
						</li>
						
						<li>
							<a href="cc.widget.html">cc.widget</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="cc.action.Action.html">cc.action.Action</a>
						</li>
						
						<li>
							<a href="cc.action.ActionChainContext.html">cc.action.ActionChainContext</a>
						</li>
						
						<li>
							<a href="cc.action.ActionChainContext_constructor.html">cc.action.ActionChainContext#constructor</a>
						</li>
						
						<li>
							<a href="cc.action.ActionInfo.html">cc.action.ActionInfo</a>
						</li>
						
						<li>
							<a href="cc.action.ActionManager.html">cc.action.ActionManager</a>
						</li>
						
						<li>
							<a href="cc.action.AlphaAction.html">cc.action.AlphaAction</a>
						</li>
						
						<li>
							<a href="cc.action.AnimateAction.html">cc.action.AnimateAction</a>
						</li>
						
						<li>
							<a href="cc.action.Interpolator.html">cc.action.Interpolator</a>
						</li>
						
						<li>
							<a href="cc.action.JumpAction.html">cc.action.JumpAction</a>
						</li>
						
						<li>
							<a href="cc.action.MoveAction.html">cc.action.MoveAction</a>
						</li>
						
						<li>
							<a href="cc.action.ParseInterpolator.html">cc.action.ParseInterpolator</a>
						</li>
						
						<li>
							<a href="cc.action.PathAction.html">cc.action.PathAction</a>
						</li>
						
						<li>
							<a href="cc.action.PropertyAction.html">cc.action.PropertyAction</a>
						</li>
						
						<li>
							<a href="cc.action.PropertyInfo.html">cc.action.PropertyInfo</a>
						</li>
						
						<li>
							<a href="cc.action.RotateAction.html">cc.action.RotateAction</a>
						</li>
						
						<li>
							<a href="cc.action.ScaleAction.html">cc.action.ScaleAction</a>
						</li>
						
						<li>
							<a href="cc.action.SchedulerQueue.html">cc.action.SchedulerQueue</a>
						</li>
						
						<li>
							<a href="cc.action.SchedulerQueueTask.html">cc.action.SchedulerQueueTask</a>
						</li>
						
						<li>
							<a href="cc.action.SequenceAction.html">cc.action.SequenceAction</a>
						</li>
						
						<li>
							<a href="cc.action.TintAction.html">cc.action.TintAction</a>
						</li>
						
						<li>
							<a href="cc.game.Game.html">cc.game.Game</a>
						</li>
						
						<li>
							<a href="cc.input.InputManager.html">cc.input.InputManager</a>
						</li>
						
						<li>
							<a href="cc.input.InputManagerEvent.html">cc.input.InputManagerEvent</a>
						</li>
						
						<li>
							<a href="cc.input.KeyActionInfo.html">cc.input.KeyActionInfo</a>
						</li>
						
						<li>
							<a href="cc.input.KeyboardCursor.html">cc.input.KeyboardCursor</a>
						</li>
						
						<li>
							<a href="cc.input.KeyboardInputManager.html">cc.input.KeyboardInputManager</a>
						</li>
						
						<li>
							<a href="cc.input.KeyInfo.html">cc.input.KeyInfo</a>
						</li>
						
						<li>
							<a href="cc.input.MouseInputManager.html">cc.input.MouseInputManager</a>
						</li>
						
						<li>
							<a href="cc.input.MouseInputManagerEvent.html">cc.input.MouseInputManagerEvent</a>
						</li>
						
						<li>
							<a href="cc.input.PriorityInputNode.html">cc.input.PriorityInputNode</a>
						</li>
						
						<li>
							<a href="cc.input.SceneGraphInputTreeNode.html">cc.input.SceneGraphInputTreeNode</a>
						</li>
						
						<li>
							<a href="cc.math.Color.html">cc.math.Color</a>
						</li>
						
						<li>
							<a href="cc.math.Dimension.html">cc.math.Dimension</a>
						</li>
						
						<li>
							<a href="cc.math.Matrix3.html">cc.math.Matrix3</a>
						</li>
						
						<li>
							<a href="cc.math.Path.html">cc.math.Path</a>
						</li>
						
						<li>
							<a href="cc.math.path.ContainerSegment.html">cc.math.path.ContainerSegment</a>
						</li>
						
						<li>
							<a href="cc.math.path.SegmentArc.html">cc.math.path.SegmentArc</a>
						</li>
						
						<li>
							<a href="cc.math.path.SegmentBezier.html">cc.math.path.SegmentBezier</a>
						</li>
						
						<li>
							<a href="cc.math.path.SegmentCardinalSpline.html">cc.math.path.SegmentCardinalSpline</a>
						</li>
						
						<li>
							<a href="cc.math.path_.html#SegmentLine">cc.math.path.SegmentLine</a>
						</li>
						
						<li>
							<a href="cc.math.path.SegmentQuadratic.html">cc.math.path.SegmentQuadratic</a>
						</li>
						
						<li>
							<a href="cc.math.path.SubPath.html">cc.math.path.SubPath</a>
						</li>
						
						<li>
							<a href="cc.math.Rectangle.html">cc.math.Rectangle</a>
						</li>
						
						<li>
							<a href="cc.math.Vector.html">cc.math.Vector</a>
						</li>
						
						<li>
							<a href="cc.node.Director.html">cc.node.Director</a>
						</li>
						
						<li>
							<a href="cc.node.FastSprite.html">cc.node.FastSprite</a>
						</li>
						
						<li>
							<a href="cc.node.Node.html">cc.node.Node</a>
						</li>
						
						<li>
							<a href="cc.node.Scene.html">cc.node.Scene</a>
						</li>
						
						<li>
							<a href="cc.node.Sprite_.html">cc.node.Sprite</a>
						</li>
						
						<li>
							<a href="cc.node.sprite.Animation.html">cc.node.sprite.Animation</a>
						</li>
						
						<li>
							<a href="cc.node.sprite.AnimationCache.html">cc.node.sprite.AnimationCache</a>
						</li>
						
						<li>
							<a href="cc.node.sprite.SpriteFrame.html">cc.node.sprite.SpriteFrame</a>
						</li>
						
						<li>
							<a href="cc.plugin.asset.AssetManager.html">cc.plugin.asset.AssetManager</a>
						</li>
						
						<li>
							<a href="cc.plugin.audio.AudioEffect.html">cc.plugin.audio.AudioEffect</a>
						</li>
						
						<li>
							<a href="cc.plugin.audio.AudioManager.html">cc.plugin.audio.AudioManager</a>
						</li>
						
						<li>
							<a href="cc.plugin.font.FontMetrics.html">cc.plugin.font.FontMetrics</a>
						</li>
						
						<li>
							<a href="cc.plugin.font.SpriteFont.html">cc.plugin.font.SpriteFont</a>
						</li>
						
						<li>
							<a href="cc.plugin.font.SpriteFontChar.html">cc.plugin.font.SpriteFontChar</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.BorderLayout.html">cc.plugin.layout.BorderLayout</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.Gap.html">cc.plugin.layout.Gap</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.GridLayout.html">cc.plugin.layout.GridLayout</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.Insets.html">cc.plugin.layout.Insets</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.LayerLayout.html">cc.plugin.layout.LayerLayout</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.Layout.html">cc.plugin.layout.Layout</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.Unit.html">cc.plugin.layout.Unit</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.Loader.html">cc.plugin.loader.Loader</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.ResourceLoaderAudioBuffer.html">cc.plugin.loader.ResourceLoaderAudioBuffer</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.ResourceLoaderImage.html">cc.plugin.loader.ResourceLoaderImage</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.ResourceLoaderJSON.html">cc.plugin.loader.ResourceLoaderJSON</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.ResourceLoaderXML.html">cc.plugin.loader.ResourceLoaderXML</a>
						</li>
						
						<li>
							<a href="cc.plugin.texture.TexturePacker.html">cc.plugin.texture.TexturePacker</a>
						</li>
						
						<li>
							<a href="cc.plugin.texture.TexturePackerNode.html">cc.plugin.texture.TexturePackerNode</a>
						</li>
						
						<li>
							<a href="cc.plugin.texture.TexturePackerPage.html">cc.plugin.texture.TexturePackerPage</a>
						</li>
						
						<li>
							<a href="cc.render.CanvasRenderer.html">cc.render.CanvasRenderer</a>
						</li>
						
						<li>
							<a href="cc.render.DecoratedWebGLRenderingContext.html">cc.render.DecoratedWebGLRenderingContext</a>
						</li>
						
						<li>
							<a href="cc.render.GeometryBatcher.html">cc.render.GeometryBatcher</a>
						</li>
						
						<li>
							<a href="cc.render.Pattern.html">cc.render.Pattern</a>
						</li>
						
						<li>
							<a href="cc.render.Renderer.html">cc.render.Renderer</a>
						</li>
						
						<li>
							<a href="cc.render.RenderingContextSnapshot.html">cc.render.RenderingContextSnapshot</a>
						</li>
						
						<li>
							<a href="cc.render.ScaleManager.html">cc.render.ScaleManager</a>
						</li>
						
						<li>
							<a href="cc.render.shader.AbstractShader.html">cc.render.shader.AbstractShader</a>
						</li>
						
						<li>
							<a href="cc.render.shader.Attribute.html">cc.render.shader.Attribute</a>
						</li>
						
						<li>
							<a href="cc.render.shader.MatrixUniform.html">cc.render.shader.MatrixUniform</a>
						</li>
						
						<li>
							<a href="cc.render.shader.SolidColorShader.html">cc.render.shader.SolidColorShader</a>
						</li>
						
						<li>
							<a href="cc.render.shader.TextureShader.html">cc.render.shader.TextureShader</a>
						</li>
						
						<li>
							<a href="cc.render.shader.TextureUniform.html">cc.render.shader.TextureUniform</a>
						</li>
						
						<li>
							<a href="cc.render.shader.Uniform.html">cc.render.shader.Uniform</a>
						</li>
						
						<li>
							<a href="cc.render.Texture2D.html">cc.render.Texture2D</a>
						</li>
						
						<li>
							<a href="cc.render.WebGLRenderer.html">cc.render.WebGLRenderer</a>
						</li>
						
						<li>
							<a href="cc.transition.Transition.html">cc.transition.Transition</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionFade.html">cc.transition.TransitionFade</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionMove.html">cc.transition.TransitionMove</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionSlideInB.html">cc.transition.TransitionSlideInB</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionSlideInL.html">cc.transition.TransitionSlideInL</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionSlideInR.html">cc.transition.TransitionSlideInR</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionSlideInT.html">cc.transition.TransitionSlideInT</a>
						</li>
						
						<li>
							<a href="cc.util.Resource.html">cc.util.Resource</a>
						</li>
						
						<li>
							<a href="cc.widget.Button.html">cc.widget.Button</a>
						</li>
						
						<li>
							<a href="cc.widget.Label.html">cc.widget.Label</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="global.html#__extends">__extends</a>
						</li>
						
						<li>
							<a href="global.html#test">test</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
			<div class="span12">
				
				<div id="main">
					


		<h1 class="page-title">Source: math/path/BezierTracer.js</h1>
    
<section>
	<article>
		<pre
			class="sunlight-highlight-javascript linenums">/**
 * License: see license.txt file
 */
/// &lt;reference path="../Point.ts"/>
var cc;
(function (cc) {
    var math;
    (function (math) {
        var path;
        (function (path) {
            "use strict";
            var Vector = cc.math.Vector;
            /**
             *
             * Original source:
             * http://www.antigrain.com/research/adaptive_bezier/index.html
             *
             */
            /**
             * Recursion limit to calculate curve.
             * @type {number}
             */
            var curve_recursion_limit = 8;
            /**
             * 0.2 when stroking is on lines > 1px in width.
             * You set it in radians. The less this value is the more accurate will be the approximation at sharp turns.
             * But 0 means that we don't consider angle conditions at all.
             * @type {number}
             */
            var m_angle_tolerance = 0.2;
            /**
             * should not exceed 10-15 degrees (in radians)
             * @type {number}
             */
            var m_cusp_limit = 15 * Math.PI / 180;
            /**
             * worlModelView scale factor. (1 by default)
             * @type {number}
             */
            var m_approximation_scale = 1;
            /**
             * colinearity threshold.
             * @type {number}
             */
            var curve_collinearity_epsilon = 0.001;
            /**
             *
             * @type {number}
             */
            var curve_angle_tolerance_epsilon = 0;
            /**
             * calculated by m_approximation_scale
             * @type {number}
             */
            var m_distance_tolerance = 0.0001;
            function __recursive_bezier(points, x1, y1, x2, y2, x3, y3, x4, y4, level) {
                if (level > curve_recursion_limit) {
                    return;
                }
                // Calculate all the mid-points of the line segments
                //----------------------
                var x12 = (x1 + x2) / 2;
                var y12 = (y1 + y2) / 2;
                var x23 = (x2 + x3) / 2;
                var y23 = (y2 + y3) / 2;
                var x34 = (x3 + x4) / 2;
                var y34 = (y3 + y4) / 2;
                var x123 = (x12 + x23) / 2;
                var y123 = (y12 + y23) / 2;
                var x234 = (x23 + x34) / 2;
                var y234 = (y23 + y34) / 2;
                var x1234 = (x123 + x234) / 2;
                var y1234 = (y123 + y234) / 2;
                if (level > 0) {
                    // Try to approximate the full cubic curve by a single straight line
                    //------------------
                    var dx = x4 - x1;
                    var dy = y4 - y1;
                    var d2 = Math.abs(((x2 - x4) * dy - (y2 - y4) * dx));
                    var d3 = Math.abs(((x3 - x4) * dy - (y3 - y4) * dx));
                    var da1, da2;
                    if (d2 > curve_collinearity_epsilon &amp;&amp; d3 > curve_collinearity_epsilon) {
                        // Regular care
                        //-----------------
                        if ((d2 + d3) * (d2 + d3) &lt;= m_distance_tolerance * (dx * dx + dy * dy)) {
                            // If the curvature doesn't exceed the distance_tolerance value
                            // we tend to finish subdivisions.
                            //----------------------
                            if (m_angle_tolerance &lt; curve_angle_tolerance_epsilon) {
                                points.push(new Vector(x1234, y1234));
                                return;
                            }
                            // Angle &amp; Cusp Condition
                            //----------------------
                            var a23 = Math.atan2(y3 - y2, x3 - x2);
                            da1 = Math.abs(a23 - Math.atan2(y2 - y1, x2 - x1));
                            da2 = Math.abs(Math.atan2(y4 - y3, x4 - x3) - a23);
                            if (da1 >= Math.PI)
                                da1 = 2 * Math.PI - da1;
                            if (da2 >= Math.PI)
                                da2 = 2 * Math.PI - da2;
                            if (da1 + da2 &lt; m_angle_tolerance) {
                                // Finally we can stop the recursion
                                //----------------------
                                points.push(new Vector(x1234, y1234));
                                return;
                            }
                            if (m_cusp_limit !== 0.0) {
                                if (da1 > m_cusp_limit) {
                                    points.push(new Vector(x2, y2));
                                    return;
                                }
                                if (da2 > m_cusp_limit) {
                                    points.push(new Vector(x3, y3));
                                    return;
                                }
                            }
                        }
                    }
                    else {
                        if (d2 > curve_collinearity_epsilon) {
                            // p1,p3,p4 are collinear, p2 is considerable
                            //----------------------
                            if (d2 * d2 &lt;= m_distance_tolerance * (dx * dx + dy * dy)) {
                                if (m_angle_tolerance &lt; curve_angle_tolerance_epsilon) {
                                    points.push(new Vector(x1234, y1234));
                                    return;
                                }
                                // Angle Condition
                                //----------------------
                                da1 = Math.abs(Math.atan2(y3 - y2, x3 - x2) - Math.atan2(y2 - y1, x2 - x1));
                                if (da1 >= Math.PI)
                                    da1 = 2 * Math.PI - da1;
                                if (da1 &lt; m_angle_tolerance) {
                                    points.push(new Vector(x2, y2));
                                    points.push(new Vector(x3, y3));
                                    return;
                                }
                                if (m_cusp_limit !== 0.0) {
                                    if (da1 > m_cusp_limit) {
                                        points.push(new Vector(x2, y2));
                                        return;
                                    }
                                }
                            }
                        }
                        else if (d3 > curve_collinearity_epsilon) {
                            // p1,p2,p4 are collinear, p3 is considerable
                            //----------------------
                            if (d3 * d3 &lt;= m_distance_tolerance * (dx * dx + dy * dy)) {
                                if (m_angle_tolerance &lt; curve_angle_tolerance_epsilon) {
                                    points.push(new Vector(x1234, y1234));
                                    return;
                                }
                                // Angle Condition
                                //----------------------
                                da1 = Math.abs(Math.atan2(y4 - y3, x4 - x3) - Math.atan2(y3 - y2, x3 - x2));
                                if (da1 >= Math.PI)
                                    da1 = 2 * Math.PI - da1;
                                if (da1 &lt; m_angle_tolerance) {
                                    points.push(new Vector(x2, y2));
                                    points.push(new Vector(x3, y3));
                                    return;
                                }
                                if (m_cusp_limit !== 0.0) {
                                    if (da1 > m_cusp_limit) {
                                        points.push(new Vector(x3, y3));
                                        return;
                                    }
                                }
                            }
                        }
                        else {
                            // Collinear case
                            //-----------------
                            dx = x1234 - (x1 + x4) / 2;
                            dy = y1234 - (y1 + y4) / 2;
                            if (dx * dx + dy * dy &lt;= m_distance_tolerance) {
                                points.push(new Vector(x1234, y1234));
                                return;
                            }
                        }
                    }
                }
                // Continue subdivision
                //----------------------
                __recursive_bezier(points, x1, y1, x12, y12, x123, y123, x1234, y1234, level + 1);
                __recursive_bezier(points, x1234, y1234, x234, y234, x34, y34, x4, y4, level + 1);
            }
            /**
             *
             * @param p0 {cc.math.Vector}
             * @param cp0 {cc.math.Vector}
             * @param cp1 {cc.math.Vector}
             * @param p1 {cc.math.Vector}
             * @param points {Array&lt;cc.math.Vector>=}
             *
             * @static
             */
            function traceBezier(p0, cp0, cp1, p1, m_points) {
                var x1 = p0.x;
                var y1 = p0.y;
                var x2 = cp0.x;
                var y2 = cp0.y;
                var x3 = cp1.x;
                var y3 = cp1.y;
                var x4 = p1.x;
                var y4 = p1.y;
                var m_points = m_points || [];
                m_distance_tolerance = 0.5 / m_approximation_scale;
                m_distance_tolerance *= m_distance_tolerance;
                m_points.push(new Vector(x1, y1));
                __recursive_bezier(m_points, x1, y1, x2, y2, x3, y3, x4, y4, 0);
                m_points.push(new Vector(x4, y4));
                return m_points;
            }
            path.traceBezier = traceBezier;
            /**
             *
             * @param p0 {cc.math.Vector}
             * @param cp0 {cc.math.Vector}
             * @param p1 {cc.math.Vector}
             * @param m_points {Array&lt;cc.math.Vector>=}
             * @static
             */
            function traceQuadratic(p0, cp0, p1, m_points) {
                var x1 = p0.x;
                var y1 = p0.y;
                var x2 = cp0.x;
                var y2 = cp0.y;
                var x3 = p1.x;
                var y3 = p1.y;
                m_points = m_points || [];
                m_distance_tolerance = 0.5 / m_approximation_scale;
                m_distance_tolerance *= m_distance_tolerance;
                m_points.push(new Vector(x1, y1));
                __recursive_quadratic(m_points, x1, y1, x2, y2, x3, y3, 0);
                m_points.push(new Vector(x3, y3));
                return m_points;
            }
            path.traceQuadratic = traceQuadratic;
            /**
             *
             * @param x1 {number}
             * @param y1 {number}
             * @param x2 {number}
             * @param y2 {number}
             * @param x3 {number}
             * @param y3 {number}
             * @param level {number}
             * @private
             * @static
             */
            function __recursive_quadratic(points, x1, y1, x2, y2, x3, y3, level) {
                if (level > curve_recursion_limit) {
                    return;
                }
                // Calculate all the mid-points of the line segments
                //----------------------
                var x12 = (x1 + x2) / 2;
                var y12 = (y1 + y2) / 2;
                var x23 = (x2 + x3) / 2;
                var y23 = (y2 + y3) / 2;
                var x123 = (x12 + x23) / 2;
                var y123 = (y12 + y23) / 2;
                var dx = x3 - x1;
                var dy = y3 - y1;
                var d = Math.abs(((x2 - x3) * dy - (y2 - y3) * dx));
                if (d > curve_collinearity_epsilon) {
                    // Regular care
                    //-----------------
                    if (d * d &lt;= m_distance_tolerance * (dx * dx + dy * dy)) {
                        // If the curvature doesn't exceed the distance_tolerance value
                        // we tend to finish subdivisions.
                        //----------------------
                        if (m_angle_tolerance &lt; curve_angle_tolerance_epsilon) {
                            points.push(new Vector(x123, y123));
                            return;
                        }
                        // Angle &amp; Cusp Condition
                        //----------------------
                        var da = Math.abs(Math.atan2(y3 - y2, x3 - x2) - Math.atan2(y2 - y1, x2 - x1));
                        if (da >= Math.PI)
                            da = 2 * Math.PI - da;
                        if (da &lt; m_angle_tolerance) {
                            // Finally we can stop the recursion
                            //----------------------
                            points.push(new Vector(x123, y123));
                            return;
                        }
                    }
                }
                else {
                    // Collinear case
                    //-----------------
                    dx = x123 - (x1 + x3) / 2;
                    dy = y123 - (y1 + y3) / 2;
                    if (dx * dx + dy * dy &lt;= m_distance_tolerance) {
                        points.push(new Vector(x123, y123));
                        return;
                    }
                }
                // Continue subdivision
                //----------------------
                __recursive_quadratic(points, x1, y1, x12, y12, x123, y123, level + 1);
                __recursive_quadratic(points, x123, y123, x23, y23, x3, y3, level + 1);
            }
        })(path = math.path || (math.path = {}));
    })(math = cc.math || (cc.math = {}));
})(cc || (cc = {}));
</pre>
	</article>
</section>





				</div>

				<div class="clearfix"></div>
				<footer>
					
					@hyperandroid
					<br />
					
					
		<span class="copyright">
		Chukong inc. 2014
		</span>
					<br />
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a>
		on 23/Tu/2015 using the <a
			href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<br clear="both">
		</div>

	</div>
	<!--<script src="scripts/sunlight.js"></script>-->
	<script src="scripts/docstrap.lib.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>

	<script>
		$( function () {
			$( "[id*='$']" ).each( function () {
				var $this = $( this );

				$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
			} );

			$( "#toc" ).toc( {
				anchorName  : function ( i, heading, prefix ) {
					return $( heading ).attr( "id" ) || ( prefix + i );
				},
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : "100px"
			} );

			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );
			$( '.dropdown-toggle' ).dropdown();
//			$( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

			$( ".tutorial-section pre, .readme-section pre" ).each( function () {
				var $this = $( this );

				var example = $this.find( "code" );
				exampleText = example.html();
				var lang = /{@lang (.*?)}/.exec( exampleText );
				if ( lang && lang[1] ) {
					exampleText = exampleText.replace( lang[0], "" );
					example.html( exampleText );
					lang = lang[1];
				} else {
					lang = "javascript";
				}

				if ( lang ) {

					$this
						.addClass( "sunlight-highlight-" + lang )
						.addClass( "linenums" )
						.html( example.html() );

				}
			} );

			Sunlight.highlightAll( {
				lineNumbers : true,
				showMenu : true,
				enableDoclinks : true
			} );
		} );
	 </script>



	<!--Navigation and Symbol Display-->
	


	<!--Google Analytics-->
	

</body>
</html>
