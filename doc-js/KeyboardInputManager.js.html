<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>CocosJS Source: input/KeyboardInputManager.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.cerulean.css">

</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top ">
		<div class="navbar-inner">
			<a class="brand" href="index.html">CocosJS</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="global.html#cc">cc</a>
						</li>
						
						<li>
							<a href="global.html#cc#action">cc.action</a>
						</li>
						
						<li>
							<a href="cc.Debug.html">cc.Debug</a>
						</li>
						
						<li>
							<a href="cc.game.html">cc.game</a>
						</li>
						
						<li>
							<a href="cc.input.html">cc.input</a>
						</li>
						
						<li>
							<a href="cc.locale.html">cc.locale</a>
						</li>
						
						<li>
							<a href="cc.math.html">cc.math</a>
						</li>
						
						<li>
							<a href="cc.math.path_.html">cc.math.path</a>
						</li>
						
						<li>
							<a href="cc.node.html">cc.node</a>
						</li>
						
						<li>
							<a href="cc.node.sprite.html">cc.node.sprite</a>
						</li>
						
						<li>
							<a href="cc.plugin.html">cc.plugin</a>
						</li>
						
						<li>
							<a href="cc.plugin.asset.html">cc.plugin.asset</a>
						</li>
						
						<li>
							<a href="cc.plugin.audio.html">cc.plugin.audio</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.html">cc.plugin.layout</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.html">cc.plugin.loader</a>
						</li>
						
						<li>
							<a href="cc.plugin.texture.html">cc.plugin.texture</a>
						</li>
						
						<li>
							<a href="cc.render.html">cc.render</a>
						</li>
						
						<li>
							<a href="cc.render.shader.html">cc.render.shader</a>
						</li>
						
						<li>
							<a href="cc.render.WebGLState.html">cc.render.WebGLState</a>
						</li>
						
						<li>
							<a href="cc.transition.html">cc.transition</a>
						</li>
						
						<li>
							<a href="cc.util.html">cc.util</a>
						</li>
						
						<li>
							<a href="cc.widget.html">cc.widget</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="cc.action.Action.html">cc.action.Action</a>
						</li>
						
						<li>
							<a href="cc.action.ActionChainContext.html">cc.action.ActionChainContext</a>
						</li>
						
						<li>
							<a href="cc.action.ActionChainContext_constructor.html">cc.action.ActionChainContext#constructor</a>
						</li>
						
						<li>
							<a href="cc.action.ActionInfo.html">cc.action.ActionInfo</a>
						</li>
						
						<li>
							<a href="cc.action.ActionManager.html">cc.action.ActionManager</a>
						</li>
						
						<li>
							<a href="cc.action.AlphaAction.html">cc.action.AlphaAction</a>
						</li>
						
						<li>
							<a href="cc.action.AnimateAction.html">cc.action.AnimateAction</a>
						</li>
						
						<li>
							<a href="cc.action.Interpolator.html">cc.action.Interpolator</a>
						</li>
						
						<li>
							<a href="cc.action.JumpAction.html">cc.action.JumpAction</a>
						</li>
						
						<li>
							<a href="cc.action.MoveAction.html">cc.action.MoveAction</a>
						</li>
						
						<li>
							<a href="cc.action.ParseInterpolator.html">cc.action.ParseInterpolator</a>
						</li>
						
						<li>
							<a href="cc.action.PathAction.html">cc.action.PathAction</a>
						</li>
						
						<li>
							<a href="cc.action.PropertyAction.html">cc.action.PropertyAction</a>
						</li>
						
						<li>
							<a href="cc.action.PropertyInfo.html">cc.action.PropertyInfo</a>
						</li>
						
						<li>
							<a href="cc.action.RotateAction.html">cc.action.RotateAction</a>
						</li>
						
						<li>
							<a href="cc.action.ScaleAction.html">cc.action.ScaleAction</a>
						</li>
						
						<li>
							<a href="cc.action.SchedulerQueue.html">cc.action.SchedulerQueue</a>
						</li>
						
						<li>
							<a href="cc.action.SchedulerQueueTask.html">cc.action.SchedulerQueueTask</a>
						</li>
						
						<li>
							<a href="cc.action.SequenceAction.html">cc.action.SequenceAction</a>
						</li>
						
						<li>
							<a href="cc.action.TintAction.html">cc.action.TintAction</a>
						</li>
						
						<li>
							<a href="cc.game.Game.html">cc.game.Game</a>
						</li>
						
						<li>
							<a href="cc.input.InputManager.html">cc.input.InputManager</a>
						</li>
						
						<li>
							<a href="cc.input.InputManagerEvent.html">cc.input.InputManagerEvent</a>
						</li>
						
						<li>
							<a href="cc.input.KeyActionInfo.html">cc.input.KeyActionInfo</a>
						</li>
						
						<li>
							<a href="cc.input.KeyboardCursor.html">cc.input.KeyboardCursor</a>
						</li>
						
						<li>
							<a href="cc.input.KeyboardInputManager.html">cc.input.KeyboardInputManager</a>
						</li>
						
						<li>
							<a href="cc.input.KeyInfo.html">cc.input.KeyInfo</a>
						</li>
						
						<li>
							<a href="cc.input.MouseInputManager.html">cc.input.MouseInputManager</a>
						</li>
						
						<li>
							<a href="cc.input.MouseInputManagerEvent.html">cc.input.MouseInputManagerEvent</a>
						</li>
						
						<li>
							<a href="cc.input.PriorityInputNode.html">cc.input.PriorityInputNode</a>
						</li>
						
						<li>
							<a href="cc.input.SceneGraphInputTreeNode.html">cc.input.SceneGraphInputTreeNode</a>
						</li>
						
						<li>
							<a href="cc.math.Color.html">cc.math.Color</a>
						</li>
						
						<li>
							<a href="cc.math.Dimension.html">cc.math.Dimension</a>
						</li>
						
						<li>
							<a href="cc.math.Matrix3.html">cc.math.Matrix3</a>
						</li>
						
						<li>
							<a href="cc.math.Path.html">cc.math.Path</a>
						</li>
						
						<li>
							<a href="cc.math.path.ContainerSegment.html">cc.math.path.ContainerSegment</a>
						</li>
						
						<li>
							<a href="cc.math.path.SegmentArc.html">cc.math.path.SegmentArc</a>
						</li>
						
						<li>
							<a href="cc.math.path.SegmentBezier.html">cc.math.path.SegmentBezier</a>
						</li>
						
						<li>
							<a href="cc.math.path.SegmentCardinalSpline.html">cc.math.path.SegmentCardinalSpline</a>
						</li>
						
						<li>
							<a href="cc.math.path_.html#SegmentLine">cc.math.path.SegmentLine</a>
						</li>
						
						<li>
							<a href="cc.math.path.SegmentQuadratic.html">cc.math.path.SegmentQuadratic</a>
						</li>
						
						<li>
							<a href="cc.math.path.SubPath.html">cc.math.path.SubPath</a>
						</li>
						
						<li>
							<a href="cc.math.Rectangle.html">cc.math.Rectangle</a>
						</li>
						
						<li>
							<a href="cc.math.Vector.html">cc.math.Vector</a>
						</li>
						
						<li>
							<a href="cc.node.Director.html">cc.node.Director</a>
						</li>
						
						<li>
							<a href="cc.node.FastSprite.html">cc.node.FastSprite</a>
						</li>
						
						<li>
							<a href="cc.node.Node.html">cc.node.Node</a>
						</li>
						
						<li>
							<a href="cc.node.Scene.html">cc.node.Scene</a>
						</li>
						
						<li>
							<a href="cc.node.Sprite_.html">cc.node.Sprite</a>
						</li>
						
						<li>
							<a href="cc.node.sprite.Animation.html">cc.node.sprite.Animation</a>
						</li>
						
						<li>
							<a href="cc.node.sprite.AnimationCache.html">cc.node.sprite.AnimationCache</a>
						</li>
						
						<li>
							<a href="cc.node.sprite.SpriteFrame.html">cc.node.sprite.SpriteFrame</a>
						</li>
						
						<li>
							<a href="cc.plugin.asset.AssetManager.html">cc.plugin.asset.AssetManager</a>
						</li>
						
						<li>
							<a href="cc.plugin.audio.AudioEffect.html">cc.plugin.audio.AudioEffect</a>
						</li>
						
						<li>
							<a href="cc.plugin.audio.AudioManager.html">cc.plugin.audio.AudioManager</a>
						</li>
						
						<li>
							<a href="cc.plugin.font.FontMetrics.html">cc.plugin.font.FontMetrics</a>
						</li>
						
						<li>
							<a href="cc.plugin.font.SpriteFont.html">cc.plugin.font.SpriteFont</a>
						</li>
						
						<li>
							<a href="cc.plugin.font.SpriteFontChar.html">cc.plugin.font.SpriteFontChar</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.BorderLayout.html">cc.plugin.layout.BorderLayout</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.Gap.html">cc.plugin.layout.Gap</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.GridLayout.html">cc.plugin.layout.GridLayout</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.Insets.html">cc.plugin.layout.Insets</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.LayerLayout.html">cc.plugin.layout.LayerLayout</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.Layout.html">cc.plugin.layout.Layout</a>
						</li>
						
						<li>
							<a href="cc.plugin.layout.Unit.html">cc.plugin.layout.Unit</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.Loader.html">cc.plugin.loader.Loader</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.ResourceLoaderAudioBuffer.html">cc.plugin.loader.ResourceLoaderAudioBuffer</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.ResourceLoaderImage.html">cc.plugin.loader.ResourceLoaderImage</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.ResourceLoaderJSON.html">cc.plugin.loader.ResourceLoaderJSON</a>
						</li>
						
						<li>
							<a href="cc.plugin.loader.ResourceLoaderXML.html">cc.plugin.loader.ResourceLoaderXML</a>
						</li>
						
						<li>
							<a href="cc.plugin.texture.TexturePacker.html">cc.plugin.texture.TexturePacker</a>
						</li>
						
						<li>
							<a href="cc.plugin.texture.TexturePackerNode.html">cc.plugin.texture.TexturePackerNode</a>
						</li>
						
						<li>
							<a href="cc.plugin.texture.TexturePackerPage.html">cc.plugin.texture.TexturePackerPage</a>
						</li>
						
						<li>
							<a href="cc.render.CanvasRenderer.html">cc.render.CanvasRenderer</a>
						</li>
						
						<li>
							<a href="cc.render.DecoratedWebGLRenderingContext.html">cc.render.DecoratedWebGLRenderingContext</a>
						</li>
						
						<li>
							<a href="cc.render.GeometryBatcher.html">cc.render.GeometryBatcher</a>
						</li>
						
						<li>
							<a href="cc.render.Pattern.html">cc.render.Pattern</a>
						</li>
						
						<li>
							<a href="cc.render.Renderer.html">cc.render.Renderer</a>
						</li>
						
						<li>
							<a href="cc.render.RenderingContextSnapshot.html">cc.render.RenderingContextSnapshot</a>
						</li>
						
						<li>
							<a href="cc.render.ScaleManager.html">cc.render.ScaleManager</a>
						</li>
						
						<li>
							<a href="cc.render.shader.AbstractShader.html">cc.render.shader.AbstractShader</a>
						</li>
						
						<li>
							<a href="cc.render.shader.Attribute.html">cc.render.shader.Attribute</a>
						</li>
						
						<li>
							<a href="cc.render.shader.MatrixUniform.html">cc.render.shader.MatrixUniform</a>
						</li>
						
						<li>
							<a href="cc.render.shader.SolidColorShader.html">cc.render.shader.SolidColorShader</a>
						</li>
						
						<li>
							<a href="cc.render.shader.TextureShader.html">cc.render.shader.TextureShader</a>
						</li>
						
						<li>
							<a href="cc.render.shader.TextureUniform.html">cc.render.shader.TextureUniform</a>
						</li>
						
						<li>
							<a href="cc.render.shader.Uniform.html">cc.render.shader.Uniform</a>
						</li>
						
						<li>
							<a href="cc.render.Texture2D.html">cc.render.Texture2D</a>
						</li>
						
						<li>
							<a href="cc.render.WebGLRenderer.html">cc.render.WebGLRenderer</a>
						</li>
						
						<li>
							<a href="cc.transition.Transition.html">cc.transition.Transition</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionFade.html">cc.transition.TransitionFade</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionMove.html">cc.transition.TransitionMove</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionSlideInB.html">cc.transition.TransitionSlideInB</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionSlideInL.html">cc.transition.TransitionSlideInL</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionSlideInR.html">cc.transition.TransitionSlideInR</a>
						</li>
						
						<li>
							<a href="cc.transition.TransitionSlideInT.html">cc.transition.TransitionSlideInT</a>
						</li>
						
						<li>
							<a href="cc.util.Resource.html">cc.util.Resource</a>
						</li>
						
						<li>
							<a href="cc.widget.Button.html">cc.widget.Button</a>
						</li>
						
						<li>
							<a href="cc.widget.Label.html">cc.widget.Label</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="global.html#__extends">__extends</a>
						</li>
						
						<li>
							<a href="global.html#test">test</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
			<div class="span12">
				
				<div id="main">
					


		<h1 class="page-title">Source: input/KeyboardInputManager.js</h1>
    
<section>
	<article>
		<pre
			class="sunlight-highlight-javascript linenums">/**
 * Created by ibon on 1/6/15.
 */
/// &lt;reference path="./InputManager.ts"/>
var cc;
(function (cc) {
    var input;
    (function (input) {
        /**
         * Keys names and ascii chars.
         * From Impact Game Engine.
         * @name KEYS
         * @memberOf cc.input
         * @type {Map&lt;string,number>}
         */
        input.KEYS = {
            enter: 13,
            backspace: 8,
            tab: 9,
            shift: 16,
            ctrl: 17,
            alt: 18,
            pause: 19,
            capslock: 20,
            escape: 27,
            pageup: 33,
            pagedown: 34,
            end: 35,
            home: 36,
            left: 37,
            up: 38,
            right: 39,
            down: 40,
            insert: 45,
            "delete": 46,
            0: 48,
            1: 49,
            2: 50,
            3: 51,
            4: 52,
            5: 53,
            6: 54,
            7: 55,
            8: 56,
            9: 57,
            a: 65,
            b: 66,
            c: 67,
            d: 68,
            e: 69,
            f: 70,
            g: 71,
            h: 72,
            i: 73,
            j: 74,
            k: 75,
            l: 76,
            m: 77,
            n: 78,
            o: 79,
            p: 80,
            q: 81,
            r: 82,
            s: 83,
            t: 84,
            u: 85,
            v: 86,
            w: 87,
            x: 88,
            y: 89,
            z: 90,
            command: 91,
            meta: 91,
            select: 93,
            rcommand: 93,
            numpad0: 96,
            numpad1: 97,
            numpad2: 98,
            numpad3: 99,
            numpad4: 100,
            numpad5: 101,
            numpad6: 102,
            numpad7: 103,
            numpad8: 104,
            numpad9: 105,
            multiply: 106,
            add: 107,
            subtract: 109,
            decimalpoint: 110,
            divide: 111,
            f1: 112,
            f2: 113,
            f3: 114,
            f4: 115,
            f5: 116,
            f6: 117,
            f7: 118,
            f8: 119,
            f9: 120,
            f10: 121,
            f11: 122,
            f12: 123,
            numlock: 144,
            scrolllock: 145,
            semicolon: 186,
            equalsign: 187,
            comma: 188,
            dash: 189,
            period: 190,
            forwardslash: 191,
            graveaccent: 192,
            openbracket: 219,
            backslash: 220,
            closebracket: 221,
            singlequote: 222,
            commandright: 224
        };
        /**
         * Build a keyboard modifiers object.
         * Modifers have some numerical members corresponding to the key codes for command, commandright, shift, alt and control.
         *
         * @returns {object}
         */
        function buildKeyModifiers() {
            var modifiers = {};
            modifiers[input.KEYS.command] = false;
            modifiers[input.KEYS.commandright] = false;
            modifiers[input.KEYS.ctrl] = false;
            modifiers[input.KEYS.shift] = false;
            modifiers[input.KEYS.alt] = false;
            return modifiers;
        }
        /**
         * @class cc.input.KeyInfo
         * @classdesc
         *
         * Describes a key and its modifiers.
         * For example: command+a, shift+alt+g
         * A Key, is parsed from a string, amd must be defined in this order: modifiers+key.
         * It won't recognize something like: a+shift whili it will recognized shift+a
         * KeyInfo objects keep internal state for parsing result validity.
         *
         * Objects of this type are internal to the keyboard manager.
         */
        var KeyInfo = (function () {
            /**
             * Build a new KeyInfo instance from a string key representation.
             * @method cc.input.KeyInfo#constructor
             * @param keyDef {string}
             */
            function KeyInfo(keyDef) {
                /**
                 * Key Code.
                 * @member cc.input.KeyInfo#key
                 * @type {number}
                 */
                this.key = null;
                /**
                 * Modifiers Object.
                 * @member cc.input.KeyInfo#modifiers
                 * @type {object}
                 */
                this.modifiers = null;
                /**
                 * Key has been parsed correctly ?
                 * @member cc.input.KeyInfo#isValid
                 * @type {boolean}
                 */
                this.isValid = true;
                this.modifiers = buildKeyModifiers();
                var keys = keyDef.split("+");
                for (var i = 0; i &lt; keys.length - 1; i++) {
                    if (this.modifiers.hasOwnProperty(cc.input.KEYS[keys[i]])) {
                        this.modifiers[cc.input.KEYS[keys[i]]] = true;
                    }
                    else {
                        this.isValid = false;
                        console.log("wrong key modifier: '" + keys[i] + "' in key definition: " + keyDef);
                    }
                }
                var key = keys[keys.length - 1];
                if (input.KEYS.hasOwnProperty(key)) {
                    this.key = input.KEYS[key];
                }
                else {
                    this.isValid = false;
                    console.log("wrong key '" + key + "' in key definition: " + keyDef);
                }
            }
            /**
             * Test whether this KeyInfo matches a keyCode and some modifiers.
             * @method cc.input.KeyInfo#matches
             * @param key {number} key code.
             * @param modifiers {object}
             * @returns {boolean}
             */
            KeyInfo.prototype.matches = function (key, modifiers) {
                return this.key === key &amp;&amp; modifiers.ctrl === this.modifiers.ctrl &amp;&amp; modifiers.alt === this.modifiers.alt &amp;&amp; modifiers.shift === this.modifiers.shift &amp;&amp; modifiers.command === this.modifiers.command &amp;&amp; modifiers.commandright === this.modifiers.commandright;
            };
            return KeyInfo;
        })();
        input.KeyInfo = KeyInfo;
        /**
         * @class cc.input.KeyActionInfo
         * @classdesc
         *
         * A KeyActionInfo is responsible for defining a key sequence, composed by a collection of KeyInfo objects.
         * It will also be responsible for identifying whether the sequence has been types correctly, and of notifying any
         * sequence listeners registered for it.
         *
         * A sample KeyActionInfo could be for example the konami code:
         * "up up down dow left right left right b a", "a b c", or a simple "a". The callback associated with the sequence
         * will be fired when all the keys are pressed in order.
         *
         * An action info will be fired on key down or up, depending on the construction parameter.
         * For multi-key actions, the callback will be fired on key down or up of the last sequence key.
         * The sequence will be invalidated if the wrong key for the current sequence position is typed, or it more than
         * KeyActionInfo._typeTime is exceeded.
         */
        var KeyActionInfo = (function () {
            /**
             * Create a new KeyActionInfo sequence object.
             * @method cc.input.KeyActionInfo#constructor
             * @param keys {string} a string with the sequence keys definition.
             * @param action {string} down or up. If keys is a sequence of keys, the sequence will be fired on up or down
             *                        of the last sequence key.
             * @param callback {function} a parameterless callback function.
             */
            function KeyActionInfo(keys, action, callback) {
                /**
                 * The registered keys of the sequence action.
                 * @member cc.input.KeyActionInfo#_keys
                 * @type {Array&lt;cc.input.KeyInfo>}
                 * @private
                 */
                this._keys = [];
                /**
                 * Action for which the ket sequence action was registered. Either 'down' or 'up'.
                 * @member cc.input.KeyActionInfo#_action
                 * @type {string}
                 * @private
                 */
                this._action = null;
                /**
                 * Callback to fire when the sequence is complete.
                 * @member cc.input.KeyActionInfo#_callback
                 * @type {Function}
                 * @private
                 */
                this._callback = null;
                /**
                 * Current sequence expected key.
                 * @member cc.input.KeyActionInfo#_currentKeyInfoIndex
                 * @type {number}
                 * @private
                 */
                this._currentKeyInfoIndex = -1;
                /**
                 * Time at which the last valid action sequence key was typed.
                 * @member cc.input.KeyActionInfo#_time
                 * @type {number}
                 * @private
                 */
                this._time = -1;
                /**
                 * A index-sequence generated id. It is valid for unregistering key sequences from the keyboard manager.
                 * @member cc.input.KeyActionInfo#_id
                 * @type {number}
                 * @private
                 */
                this._id = KeyboardIdGenerator();
                /**
                 * If more than this milliseconds elapse between two valid sequence action keys, the sequence will be aborted.
                 * @member cc.input.KeyActionInfo#_typeTime
                 * @type {number}
                 * @private
                 */
                this._typeTime = 1000;
                this._action = action;
                this._callback = callback;
                this.__parseKeys(keys);
            }
            /**
             * Get the sequence id.
             * @method cc.input.KeyActionInfo#getId
             * @returns {number}
             */
            KeyActionInfo.prototype.getId = function () {
                return this._id;
            };
            /**
             * Build KeyInfo objects from a keys definition string.
             * @method cc.input.KeyActionInfo#__parseKeys
             * @param keys {string} a string with keys (combinations) names. for example: "command+b", "alt+shift+f1 a b c"
             * @private
             */
            KeyActionInfo.prototype.__parseKeys = function (keys) {
                var keyDefs = keys.split(" ");
                for (var i = 0; i &lt; keyDefs.length; i++) {
                    var keyDef = new KeyInfo(keyDefs[i]);
                    if (keyDef.isValid) {
                        this._keys.push(keyDef);
                    }
                }
            };
            /**
             * Signal a key down event has been generated at keyboard manager level
             * @method cc.intpu.KeyInfoAction#down
             * @param modifiers {object} modifiers object
             * @param key {number} key code
             * @param time {number} time at which the event key was produced.
             */
            KeyActionInfo.prototype.down = function (modifiers, key, time) {
                if (this._action === "down") {
                    this.__checkKey(key, modifiers, time);
                }
            };
            /**
             * Signal a key up event has been generated at keyboard manager level
             * @method cc.intpu.KeyInfoAction#up
             * @param modifiers {object} modifiers object
             * @param key {number} key code
             * @param time {number} time at which the event key was produced.
             */
            KeyActionInfo.prototype.up = function (modifiers, key, time) {
                if (this._action === "up") {
                    this.__checkKey(key, modifiers, time);
                }
            };
            /**
             * Check whether the key code fulfills the key sequence in time.
             * The sequence will be reset if the wrong expected key is pressed or too much time elapse between two valid
             * sequence keys.
             * @param key {number} key code
             * @param modifiers {object} modifiers object
             * @param time {number} time at which the event key was produced.
             * @private
             */
            KeyActionInfo.prototype.__checkKey = function (key, modifiers, time) {
                // too much time for sequence
                if (time - this._time > this._typeTime) {
                    // restart
                    this._currentKeyInfoIndex = -1;
                }
                if (this._currentKeyInfoIndex === -1) {
                    this._currentKeyInfoIndex = 0;
                    this._time = time;
                }
                if (this._keys[this._currentKeyInfoIndex].matches(key, modifiers)) {
                    // right key + modifiers
                    this._currentKeyInfoIndex++;
                    this._time = time;
                    if (this._currentKeyInfoIndex === this._keys.length) {
                        // sequence ok
                        this._callback();
                        this._currentKeyInfoIndex = -1;
                    }
                }
                else {
                    // wrong key, restart
                    this._currentKeyInfoIndex = -1;
                }
            };
            /**
             * Change the valid waiting time between two valid sequence keys.
             * The function won't check whether the number is valid or too low.
             * @method cc.input.KeyInfoAction#setSequenceTypeMaxTime
             * @param m {number}
             */
            KeyActionInfo.prototype.setSequenceTypeMaxTime = function (m) {
                this._typeTime = m;
                return this;
            };
            return KeyActionInfo;
        })();
        input.KeyActionInfo = KeyActionInfo;
        var KeyboardIdGenerator = function () {
            var index = 0;
            return function () {
                return index++;
            };
        }();
        /**
         * @class cc.input.KeyboardCursor
         * @classdesc
         *
         * This class represents a cursor composed of the 4 cursor events up, down, left and right.
         * For each of the events, a valid key enumeration can be defined.
         * For example, if "w up" is specified for up, the Cursor will fire a callback for each of the keys 'w' and 'up'.
         * This class makes all the necessary wiring between the cursor keys and KeyInfoAction objects.
         */
        var KeyboardCursor = (function () {
            /**
             * Create a new KeyboardCursor object instance.
             * @method cc.input.KeyboardCursor#constructor
             * @param kim {cc.input.KeyboardInputManager}
             * @param cd {cc.input.CursorInitializer}
             * @param callback {function(string,boolean)}
             */
            function KeyboardCursor(kim, cd, callback) {
                /**
                 * Cursor up flag.
                 * @member cc.input.KeyboardCursor#_upPressed
                 * @type {boolean}
                 * @private
                 */
                this._upPressed = false;
                /**
                 * Cursor down flag.
                 * @member cc.input.KeyboardCursor#_downPressed
                 * @type {boolean}
                 * @private
                 */
                this._downPressed = false;
                /**
                 * Cursor left flag.
                 * @member cc.input.KeyboardCursor#_leftPressed
                 * @type {boolean}
                 * @private
                 */
                this._leftPressed = false;
                /**
                 * Cursor right flag.
                 * @member cc.input.KeyboardCursor#_rightPressed
                 * @type {boolean}
                 * @private
                 */
                this._rightPressed = false;
                /**
                 * Array for KeyActionInfo generated objects to keep track of the cursor.
                 * @member cc.input.KeyboardCursor#_actionInfoIds
                 * @type {Array&lt;number>}
                 * @private
                 */
                this._actionInfoIds = [];
                /**
                 * Internal cursor id. Necessary for unregistering a cursor.
                 * @member cc.input.KeyboardCursor#_id
                 * @type {number}
                 * @private
                 */
                this._id = KeyboardIdGenerator();
                var me = this;
                this._callback = callback;
                this.__registerKeys(kim, cd.up, function () {
                    me._upPressed = true;
                    me.__onKeyChange("up", me._upPressed);
                }, function () {
                    me._upPressed = false;
                    me.__onKeyChange("up", me._upPressed);
                });
                this.__registerKeys(kim, cd.down, function () {
                    me._downPressed = true;
                    me.__onKeyChange("down", me._downPressed);
                }, function () {
                    me._downPressed = false;
                    me.__onKeyChange("down", me._downPressed);
                });
                this.__registerKeys(kim, cd.left, function () {
                    me._leftPressed = true;
                    me.__onKeyChange("left", me._leftPressed);
                }, function () {
                    me._leftPressed = false;
                    me.__onKeyChange("left", me._leftPressed);
                });
                this.__registerKeys(kim, cd.right, function () {
                    me._rightPressed = true;
                    me.__onKeyChange("right", me._rightPressed);
                }, function () {
                    me._rightPressed = false;
                    me.__onKeyChange("right", me._rightPressed);
                });
            }
            /**
             * Notify a cursor key status change.
             * @method cc.input.KeyboardCursor#__onKeyChange
             * @param key {string} the cursor event type.
             * @param pressed {boolean} true the key is pressed, false is released.
             * @private
             */
            KeyboardCursor.prototype.__onKeyChange = function (key, pressed) {
                this._callback(key, pressed, input.KEYS[key]);
            };
            /**
             * Register a KeyActionInfo for each key defined in the cursor event key description.
             * For example if "up w" is supplied, it will generate sequences for 'up' and 'w' respectively.
             * @param kim {cc.input.KeyboardInputManager}
             * @param keysdesc {string} keys descripion
             * @param callbackdown {function}
             * @param callbackup {function}
             * @private
             */
            KeyboardCursor.prototype.__registerKeys = function (kim, keysdesc, callbackdown, callbackup) {
                var keys = keysdesc.split(" ");
                for (var i = 0; i &lt; keys.length; i++) {
                    this._actionInfoIds.push(kim.onDown(keys[i], callbackdown));
                    this._actionInfoIds.push(kim.onUp(keys[i], callbackup));
                }
            };
            /**
             * Get the cursor id.
             * @method cc.input.KeyboardCursor#getId
             * @returns {number}
             */
            KeyboardCursor.prototype.getId = function () {
                return this._id;
            };
            /**
             * Unregisted all key sequences from the cursor.
             * This method is internally used by the KeyboardInputManager
             * @method cc.input.KeyboardCursor#unregisted
             * @param kim {cc.action.KeyboardInputManager}
             */
            KeyboardCursor.prototype.unregister = function (kim) {
                for (var i = 0; i &lt; this._actionInfoIds.length; i++) {
                    kim.removeActionInfo(this._actionInfoIds[i]);
                }
            };
            Object.defineProperty(KeyboardCursor.prototype, "up", {
                /**
                 * Get cursor's event up status flag.
                 * @method cc.input.KeyboardCursor#get:up
                 * @returns {boolean} true is pressed.
                 */
                get: function () {
                    return this._upPressed;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(KeyboardCursor.prototype, "down", {
                /**
                 * Get cursor's event down status flag.
                 * @method cc.input.KeyboardCursor#get:down
                 * @returns {boolean} true is pressed.
                 */
                get: function () {
                    return this._downPressed;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(KeyboardCursor.prototype, "left", {
                /**
                 * Get cursor's event left status flag.
                 * @method cc.input.KeyboardCursor#get:left
                 * @returns {boolean} true is pressed.
                 */
                get: function () {
                    return this._leftPressed;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(KeyboardCursor.prototype, "right", {
                /**
                 * Get cursor's event right status flag.
                 * @method cc.input.KeyboardCursor#get:right
                 * @returns {boolean} true is pressed.
                 */
                get: function () {
                    return this._rightPressed;
                },
                enumerable: true,
                configurable: true
            });
            return KeyboardCursor;
        })();
        input.KeyboardCursor = KeyboardCursor;
        /**
         * @class cc.input.KeyboardInputManager
         * @classdesc
         *
         * This object is the general keyboard input manager.
         * It must be instantiated.
         *
         */
        var KeyboardInputManager = (function () {
            /**
             * Create a new KeyboardInputManager instance.
             * @method cc.input.KeyboardInputManager#constructor
             */
            function KeyboardInputManager() {
                /**
                 * Whether the keyboard handler is enabled.
                 * @member cc.input.KeyboardInputManager#_enabled
                 * @type {boolean}
                 * @private
                 */
                this._enabled = false;
                /**
                 * Global keyboard modifiers.
                 * @member cc.input.KeyboardInputManager#_modifiers
                 * @type {object}
                 * @private
                 */
                this._modifiers = null;
                /**
                 * Registered KeyboardCursor objects.
                 * @member cc.input.KeyboardInputManager#_cursors
                 * @type {Map&lt;string,KeyboardCursor>}
                 * @private
                 */
                this._cursors = {};
                /**
                 * Internally bound function for down events.
                 * Do not use or modify.
                 * @member cc.input.KeyboardInputManager#_onDown
                 * @type {function(KeyboardEvent)}
                 * @private
                 */
                this._onDown = null;
                /**
                 * Internally bound function for up events.
                 * Do not use or modify.
                 * @member cc.input.KeyboardInputManager#_onUp
                 * @type {function(KeyboardEvent)}
                 * @private
                 */
                this._onUp = null;
                this._keyActionInfos = [];
                this._onDown = this.__onDown.bind(this);
                this._onUp = this.__onUp.bind(this);
                this._modifiers = buildKeyModifiers();
            }
            KeyboardInputManager.prototype.__onDown = function (e) {
                var key = e.which ? e.which : e.keyCode;
                var time = new Date().getTime();
                if (!this.__setModifiers(key, true)) {
                    for (var i = 0; i &lt; this._keyActionInfos.length; i++) {
                        this._keyActionInfos[i].down(this._modifiers, key, time);
                    }
                }
            };
            KeyboardInputManager.prototype.__onUp = function (e) {
                var key = e.which ? e.which : e.keyCode;
                var time = new Date().getTime();
                if (!this.__setModifiers(key, false)) {
                    for (var i = 0; i &lt; this._keyActionInfos.length; i++) {
                        this._keyActionInfos[i].up(this._modifiers, key, time);
                    }
                }
            };
            KeyboardInputManager.prototype.__setModifiers = function (key, down) {
                if (this._modifiers.hasOwnProperty(key)) {
                    this._modifiers[key] = down;
                    return true;
                }
                return false;
            };
            /**
             * Register and Enable the keyboard manager.
             * @method cc.input.KeyboardInputManager#enable
             */
            KeyboardInputManager.prototype.enable = function () {
                if (!this._enabled) {
                    window.addEventListener("keydown", this._onDown, false);
                    window.addEventListener("keyup", this._onUp, false);
                    this._enabled = true;
                }
            };
            /**
             * Disable the keyboard manager and remove keyboard listeners.
             * @method cc.input.KeyboardInputManager#enable
             */
            KeyboardInputManager.prototype.disable = function () {
                if (this._enabled) {
                    window.removeEventListener("keydown", this._onDown, false);
                    window.removeEventListener("keyup", this._onUp, false);
                    this._enabled = false;
                }
            };
            /**
             * Add a callback for a key sequence. Fired on 'down' of the last sequence key.
             * @method cc.input.KeyboardInputManager#onDown
             * @param keys {string}
             * @param callback {function()}
             * @returns {number}
             */
            KeyboardInputManager.prototype.onDown = function (keys, callback) {
                var kai = new KeyActionInfo(keys, "down", callback);
                this._keyActionInfos.push(kai);
                return kai.getId();
            };
            /**
             * Add a callback for a key sequence. Fired on 'up' of the last sequence key.
             * @method cc.input.KeyboardInputManager#onUp
             * @param keys {string}
             * @param callback {function()}
             * @returns {number}
             */
            KeyboardInputManager.prototype.onUp = function (keys, callback) {
                var kai = new KeyActionInfo(keys, "up", callback);
                this._keyActionInfos.push(kai);
                return kai.getId();
            };
            /**
             * Register a cursor object with the cursor keys defined in the initializer.
             * @method cc.input.KeyboardInputManager#registerCursor
             * @param cd {cc.input.CursorInitializer}
             * @param callback {function({string},{boolean}) a callback function invoked with the cursor event name and
             *        status of the cursor key.
             * @returns {number}
             */
            KeyboardInputManager.prototype.registerCursor = function (cd, callback) {
                var kc = new KeyboardCursor(this, cd, callback);
                this._cursors[kc.getId()] = kc;
                return kc.getId();
            };
            /**
             * Unregister a KeyboardCursor object.
             * @method cc.input.KeyboardInputManager#unregisterCursor
             * @param id {number}
             */
            KeyboardInputManager.prototype.unregisterCursor = function (id) {
                if (this._cursors.hasOwnProperty(id)) {
                    this._cursors[id].unregister(this);
                    this._cursors[id] = null;
                }
            };
            /**
             * Remove a key sequence from the keyboard manager.
             * @method cc.input.KeyboardInputManager#removeActionInfo
             * @param id {number}
             */
            KeyboardInputManager.prototype.removeActionInfo = function (id) {
                for (var i = 0; i &lt; this._keyActionInfos.length; i++) {
                    if (this._keyActionInfos[i].getId() === id) {
                        this._keyActionInfos.splice(i, 1);
                        return;
                    }
                }
            };
            return KeyboardInputManager;
        })();
        input.KeyboardInputManager = KeyboardInputManager;
    })(input = cc.input || (cc.input = {}));
})(cc || (cc = {}));
</pre>
	</article>
</section>





				</div>

				<div class="clearfix"></div>
				<footer>
					
					@hyperandroid
					<br />
					
					
		<span class="copyright">
		Chukong inc. 2014
		</span>
					<br />
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a>
		on 23/Tu/2015 using the <a
			href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<br clear="both">
		</div>

	</div>
	<!--<script src="scripts/sunlight.js"></script>-->
	<script src="scripts/docstrap.lib.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>

	<script>
		$( function () {
			$( "[id*='$']" ).each( function () {
				var $this = $( this );

				$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
			} );

			$( "#toc" ).toc( {
				anchorName  : function ( i, heading, prefix ) {
					return $( heading ).attr( "id" ) || ( prefix + i );
				},
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : "100px"
			} );

			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );
			$( '.dropdown-toggle' ).dropdown();
//			$( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

			$( ".tutorial-section pre, .readme-section pre" ).each( function () {
				var $this = $( this );

				var example = $this.find( "code" );
				exampleText = example.html();
				var lang = /{@lang (.*?)}/.exec( exampleText );
				if ( lang && lang[1] ) {
					exampleText = exampleText.replace( lang[0], "" );
					example.html( exampleText );
					lang = lang[1];
				} else {
					lang = "javascript";
				}

				if ( lang ) {

					$this
						.addClass( "sunlight-highlight-" + lang )
						.addClass( "linenums" )
						.html( example.html() );

				}
			} );

			Sunlight.highlightAll( {
				lineNumbers : true,
				showMenu : true,
				enableDoclinks : true
			} );
		} );
	 </script>



	<!--Navigation and Symbol Display-->
	


	<!--Google Analytics-->
	

</body>
</html>
